webpackJsonp([4,14,19,20],{"/KGm":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r("HzJ8"),a=r.n(o),s=(r("KYCO"),r("Ldyx")),i=r("C6IE"),n=r("mOjd"),c=r("UGi4"),l={data:function(){var t=this;return{isShow:!1,orderName:"",orderStatus:"1",deliverStatus:"not-delete",isDeletes:!0,deleteOrderParams:[],totalCount:0,pageNo:1,pageSize:10,modal1:!1,orderColumns:[{type:"selection",width:60,align:"center"},{title:"订单名称",key:"orderName",render:function(e,r){return e("a",{on:{click:function(){t.$router.push({path:"/orderAdvert",query:{id:r.row.orderId,flag:"1",orderName:r.row.orderName}})}}},r.row.orderName)}},{title:"ID",key:"orderId"},{title:"广告状态",key:"deliverStatusListStr",render:function(e,r){var o=r.row.deliverStatusList,s=[];if(console.log(o),o&&o.length>0){var i=function(o){var a=o.deliverStatus,i=o.totalNumber,n=t.renderDeliverText(a);console.log(n);var c=e("span",{class:"deliver-status-all",on:{click:function(){t.$router.push({path:"/orderAdvert",query:{id:r.row.orderId,flag:"2",orderName:r.row.orderName,deliverStatus:a}})}}},[n,e("span",{class:["deliver-status-"+a]},i)]);s.push(c)},n=!0,c=!1,l=void 0;try{for(var d,u=a()(o);!(n=(d=u.next()).done);n=!0){i(d.value)}}catch(t){c=!0,l=t}finally{try{!n&&u.return&&u.return()}finally{if(c)throw l}}}return e("a",s)}},{title:"广告客户",key:"customName"},{title:"操作",key:"orderAction",width:200,align:"center",render:function(e,r){return e("div",0==r.row.orderStatus?[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px",backgroundColor:"#0676c4",borderColor:"#0676c4"},on:{click:function(){t.$refs.showOrder.beforeLoad(),t.$refs.showOrder.getOrderData(r.row.orderId)}}},"查看"),e("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px",backgroundColor:"#1fa2fd",borderColor:"#1fa2fd"},on:{click:function(){t.$refs.updateOrder.beforeLoad(),t.$refs.updateOrder.getOrderData(r.row.orderId)}}},"修改")]:[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px",backgroundColor:"#0676c4",borderColor:"#0676c4"},on:{click:function(){t.$refs.showOrder.beforeLoad(),t.$refs.showOrder.getOrderData(r.row.orderId)}}},"查看"),e("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px",backgroundColor:"#1fa2fd",borderColor:"#1fa2fd"},on:{click:function(){t.$refs.updateOrder.beforeLoad(),t.$refs.updateOrder.getOrderData(r.row.orderId)}}},"修改"),e("Button",{props:{type:"error",size:"small"},style:{backgroundColor:"#ea0b00",borderColor:"#ea0b00"},on:{click:function(){var e=[];e.push(r.row),t.deleteBox(e)}}},"删除")])}}],orderData:[]}},created:function(){this.getOrderData()},methods:{selectData:function(t){var e=t.filter(function(t){return 1==t.orderStatus});this.isDeletes=!e.length>0,this.deleteOrderParams=e},deleteAll:function(){this.deleteBox(this.deleteOrderParams)},createNewOrder:function(){this.$refs.newOrder.beforeLoad()},trigger:function(){this.isShow=!this.isShow},deleteBox:function(t){var e=this,r=t.map(function(t,e){return t.orderName}),o=t.map(function(t,e){return t.orderId});this.$Modal.confirm({title:"删除订单",content:"你确定要删除"+r.join(","),onOk:function(){e.deleteOrderData(o.join(","))}})},deleteOrderData:function(t){var e=this,r="/order/deleteOrder.json?orderId="+t;this.$Http.get(r,{}).then(function(t){e.$Message.info("删除订单成功!"),e.getOrderData()})},getOrderData:function(){var t=this;this.isDeletes=!0,this.deleteCustomParams=[];var e=this.orderName,r=this.orderStatus,o=this.deliverStatus,s="/order/getOrderList.json?nameLike="+encodeURIComponent(e)+"&status="+r+"&deliverStatus="+o+"&pageNo="+this.pageNo+"&pageSize="+this.pageSize;this.$Http.get(s,{}).then(function(e){var r=e.body.data.result;t.orderData=[];var o=!0,s=!1,i=void 0;try{for(var n,c=a()(r);!(o=(n=c.next()).done);o=!0){var l=n.value,d={};d.orderName=l.orderName,d.orderStatus=l.orderStatus,d.customName=l.customName,d.orderId=l.fxAdOrderId;var u=l.deliverStatusList;d.deliverStatusList=u,t.orderData.push(d)}}catch(t){s=!0,i=t}finally{try{!o&&c.return&&c.return()}finally{if(s)throw i}}t.totalCount=e.body.data.totalCount})},changePageNo:function(t){this.pageNo=t,this.getOrderData()},changePageSize:function(t){this.pageNo=1,this.pageSize=t,this.getOrderData()},getFilterData:function(){this.getOrderData()},renderDeliverText:function(t){switch(t){case 0:return"删除";case 1:return"草稿";case 2:return"暂停";case 3:return"待投放";case 4:return"投放中";case 5:return"投放完成"}}},components:{topTitle:s.a,showOrder:i.default,updateOrder:n.default,newOrder:c.default}},d={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("top-title",{attrs:{title:"订单管理",isShowClose:"false"}}),t._v(" "),r("div",{staticClass:"master-content"},[r("div",{staticClass:"master-content-nav"},[r("div",{staticClass:"l"},[r("Button",{staticClass:"btnColor",attrs:{type:"primary"},on:{click:t.createNewOrder}},[t._v("新建订单")]),t._v(" "),r("Button",{staticClass:"btnCancel",attrs:{type:"error",disabled:t.isDeletes},on:{click:t.deleteAll}},[t._v("删除")]),t._v(" "),r("Button",{attrs:{type:"text"},on:{click:t.trigger}},[t._v("筛选  "),r("Icon",{attrs:{type:"arrow-down-b"}})],1)],1),t._v(" "),r("div",{staticClass:"r"},[r("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入订单名称"},model:{value:t.orderName,callback:function(e){t.orderName=e},expression:"orderName"}}),t._v(" "),r("Button",{staticClass:"btnColor",attrs:{type:"primary",icon:"search"},on:{click:t.getFilterData}},[t._v("搜索")])],1)]),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"master-content-middle"},[r("div",{staticClass:"label"},[t._v("\n        订单状态：\n      ")]),t._v(" "),r("div",{staticClass:"label-value"},[r("Select",{staticStyle:{width:"200px"},on:{"on-change":t.getFilterData},model:{value:t.orderStatus,callback:function(e){t.orderStatus=e},expression:"orderStatus"}},[r("Option",{attrs:{value:"-99"}},[t._v("全部")]),t._v(" "),r("Option",{attrs:{value:"1"}},[t._v("启用")]),t._v(" "),r("Option",{attrs:{value:"0"}},[t._v("删除")])],1)],1),t._v(" "),r("div",{staticClass:"label"},[t._v("\n        广告状态：\n      ")]),t._v(" "),r("div",{staticClass:"label-value"},[r("Select",{staticStyle:{width:"200px"},on:{"on-change":t.getFilterData},model:{value:t.deliverStatus,callback:function(e){t.deliverStatus=e},expression:"deliverStatus"}},[r("Option",{attrs:{value:"all"}},[t._v("全部")]),t._v(" "),r("Option",{attrs:{value:"not-delete"}},[t._v("非删除")]),t._v(" "),r("Option",{attrs:{value:"delete"}},[t._v("删除")]),t._v(" "),r("Option",{attrs:{value:"draft"}},[t._v("草稿")]),t._v(" "),r("Option",{attrs:{value:"stop"}},[t._v("暂停")]),t._v(" "),r("Option",{attrs:{value:"before-deliver"}},[t._v("待投放")]),t._v(" "),r("Option",{attrs:{value:"in-deliver"}},[t._v("投放中")]),t._v(" "),r("Option",{attrs:{value:"after-deliver"}},[t._v("投放完成")])],1)],1)]),t._v(" "),r("div",{staticClass:"master-content-content",staticStyle:{"margin-top":"10px"}},[r("Table",{ref:"selection",attrs:{border:"",columns:t.orderColumns,data:t.orderData},on:{"on-selection-change":t.selectData}}),t._v(" "),r("Page",{attrs:{total:t.totalCount,current:t.pageNo,"show-sizer":"","show-total":""},on:{"on-change":t.changePageNo,"on-page-size-change":t.changePageSize}})],1)]),t._v(" "),r("new-order",{ref:"newOrder",on:{filterParent:t.getFilterData}}),t._v(" "),r("show-order",{ref:"showOrder"}),t._v(" "),r("update-order",{ref:"updateOrder",on:{filterParent:t.getFilterData}})],1)},staticRenderFns:[]};var u=r("vSla")(l,d,!1,function(t){r("3jsE")},null,null);e.default=u.exports},"3TbN":function(t,e){},"3jsE":function(t,e){},C6IE:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Modal",{attrs:{title:"查看订单",styles:{width:"100%"},"class-name":"modal-box"},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[r("div",{staticClass:"master-content"},[r("div",{staticClass:"row"},[r("label",[t._v("订单名称:")]),t._v(t._s(t.orderName))]),t._v(" "),r("div",{staticClass:"row"},[r("label",[t._v("广告客户:")]),t._v("\n        "+t._s(t.customName)+"\n      ")]),t._v(" "),r("div",{staticClass:"row"},[r("label",[t._v("合同号:")]),t._v(t._s(t.contractNo))])]),t._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"text"},on:{click:function(e){t.modal1=!1}}},[t._v("返回")])],1)])],1)},staticRenderFns:[]};var a=r("vSla")({data:function(){return{orderName:"",customName:"",contractNo:"",orderId:"",modal1:!1}},created:function(){},methods:{beforeLoad:function(){this.orderName="",this.customName="",this.contractNo="",this.orderId=""},getOrderData:function(t){var e=this;this.orderId=t;var r="/order/getOrderById.json?orderId="+this.orderId;this.$Http.get(r,{}).then(function(t){var r=t.body.data;e.orderName=r.orderName,e.contractNo=r.contractNo,e.customName=r.customName,e.modal1=!0})}}},o,!1,function(t){r("3TbN")},"data-v-a2c366f0",null);e.default=a.exports},UGi4:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={data:function(){return{isAtive:!1,isAtiveContractNo:!1,orderName:"",contractNo:"",customId:"",soltNameLen:"最多可输入50个字符",contractNLen:"最多可输入120个字符",customList:[],modal:!1}},created:function(){this.getCustomData()},methods:{getCustomData:function(){var t=this;this.$Http.get("/custom/getAllCustomList.json?status=1",{}).then(function(e){if(0==e.body.status){var r=e.body.data.customList;t.customList=r}})},beforeLoad:function(){this.orderName="",this.contractNo="",this.customId="",this.soltNameLen="最多可输入50个字符",this.isAtive=!1,this.contractNLen="最多可输入120个字符",this.isAtiveContractNo=!1,this.modal=!0},cancel:function(){this.soltNameLen="最多可输入50个字符",this.isAtive=!1,this.contractNLen="最多可输入120个字符",this.isAtiveContractNo=!1,this.modal=!1},onFocusName:function(){this.soltNameLen="最多可输入50个字符",this.isAtive=!1},userDataNum:function(){if(this.orderName){null==this.orderName.match(/^[\s\S]{1,50}$/)&&(this.soltNameLen="长度超过50个字符",this.isAtive=!0)}else this.soltNameLen="订单名称不能为空",this.isAtive=!0},onFocuscontrac:function(){this.contractNLen="最多可输入120个字符",this.isAtiveContractNo=!1},contracDataNum:function(){if(this.contractNo){null==this.contractNo.match(/^[\s\S]{1,120}$/)&&(this.contractNLen="长度超过120个字符",this.isAtiveContractNo=!0)}else this.contractNLen="合同号不能为空",this.isAtiveContractNo=!0},checkOrder:function(){return""===this.orderName?(this.$Message.error("订单名称不能为空"),!1):""===this.customId?(this.$Message.error("广告客户不能为空"),!1):""!==this.contractNo||(this.$Message.error("合同号不能为空"),!1)},ajaxOrder:function(){var t=this;if(this.userDataNum(),this.contracDataNum(),this.isAtiveContractNo||this.isAtive)return!1;var e="/order/createOrder.json?orderName="+encodeURIComponent(this.orderName)+"&customId="+this.customId+"&contractNo="+encodeURIComponent(this.contractNo);this.$Http.get(e,{}).then(function(e){0==e.body.status&&(t.modal=!1,t.$emit("filterParent"))})},createNewOrder:function(){this.checkOrder()&&this.ajaxOrder()}}},a={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Modal",{attrs:{title:"新建订单",styles:{width:"100%"},"class-name":"modal-box"},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[r("div",{staticClass:"master-content"},[r("div",{staticClass:"row"},[r("label",[t._v("订单名称:")]),t._v(" "),r("Input",{staticStyle:{width:"300px"},attrs:{type:"text",name:"orderName",placeholder:""},on:{"on-blur":t.userDataNum,"on-focus":t.onFocusName},model:{value:t.orderName,callback:function(e){t.orderName=e},expression:"orderName"}}),t._v(" "),r("span",{staticClass:"label-right",class:{"label-right-active":t.isAtive}},[t._v(t._s(t.soltNameLen))])],1),t._v(" "),r("div",{staticClass:"row"},[r("label",[t._v("广告客户:")]),t._v(" "),t._e(),t._v(" "),r("div",{staticClass:"main-element"},[r("el-select",{staticStyle:{width:"300px"},attrs:{filterable:"",placeholder:"请选择"},model:{value:t.customId,callback:function(e){t.customId=e},expression:"customId"}},t._l(t.customList,function(t){return r("el-option",{key:t.fxAdCustomId,attrs:{label:t.customName,value:t.fxAdCustomId}})}))],1)],2),t._v(" "),r("div",{staticClass:"row"},[r("label",[t._v("合同号:")]),t._v(" "),r("Input",{staticStyle:{width:"300px"},attrs:{type:"text",name:"contractNo",placeholder:""},on:{"on-blur":t.contracDataNum,"on-focus":t.onFocuscontrac},model:{value:t.contractNo,callback:function(e){t.contractNo=e},expression:"contractNo"}}),t._v(" "),r("span",{staticClass:"label-right",class:{"label-right-active":t.isAtiveContractNo}},[t._v(t._s(t.contractNLen))])],1)]),t._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"text"},on:{click:t.cancel}},[t._v("取消")]),t._v(" "),r("Button",{staticClass:"btnColor",attrs:{type:"primary"},on:{click:t.createNewOrder}},[t._v("新建订单")])],1)])],1)},staticRenderFns:[]};var s=r("vSla")(o,a,!1,function(t){r("zxuE")},"data-v-33cbc4b8",null);e.default=s.exports},lZ06:function(t,e){},mOjd:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={data:function(){return{orderName:"",contractNo:"",customId:"",isAtive:!1,isAtiveContractNo:!1,soltNameLen:"最多可输入50个字符",contractNLen:"最多可输入120个字符",customList:[],orderId:"",modal2:!1}},created:function(){this.getCustomData()},methods:{beforeLoad:function(){this.orderName="",this.contractNo="",this.orderId="",this.soltNameLen="最多可输入50个字符",this.isAtive=!1,this.contractNLen="最多可输入120个字符",this.isAtiveContractNo=!1,this.modal2=!0},cancel:function(){this.soltNameLen="最多可输入50个字符",this.isAtive=!1,this.contractNLen="最多可输入120个字符",this.isAtiveContractNo=!1,this.modal2=!1},getCustomData:function(){var t=this;this.$Http.get("/custom/getAllCustomList.json?status=1",{}).then(function(e){if(0==e.body.status){var r=e.body.data.customList;console.log(r),t.customList=r,console.log(t.customList)}})},getOrderData:function(t){var e=this;this.orderId=t;var r="/order/getOrderById.json?orderId="+this.orderId;this.$Http.get(r,{}).then(function(t){if(0==t.body.status){var r=t.body.data;console.log(r),e.orderName=r.orderName,e.contractNo=r.contractNo,e.customId=r.fxadCustomId,e.orderId=r.fxAdOrderId,e.modal2=!0}})},checkUpOrder:function(){return""===this.orderName?(this.$Message.error("订单名称不能为空"),!1):""===this.customId?(this.$Message.error("广告客户不能为空"),!1):""!==this.contractNo||(this.$Message.error("合同号不能为空"),!1)},ajaxUpOrder:function(){var t=this;if(this.userDataNum(),this.contracDataNum(),this.isAtiveContractNo||this.isAtive)return!1;var e="/order/updateOrder.json?orderName="+encodeURIComponent(this.orderName)+"&customId="+this.customId+"&contractNo="+encodeURIComponent(this.contractNo)+"&orderId="+this.orderId;this.$Http.get(e,{}).then(function(e){0==e.body.status?(t.modal2=!1,t.$emit("filterParent")):t.modal2=!1})},updateOrder:function(){this.checkUpOrder()&&this.ajaxUpOrder()},loadMore:function(){this.pageNo=this.pageNo+1,this.getCustomData()},onFocusName:function(){this.soltNameLen="最多可输入50个字符",this.isAtive=!1},userDataNum:function(){if(this.orderName){null==this.orderName.match(/^[\s\S]{1,50}$/)&&(this.soltNameLen="长度超过50个字符",this.isAtive=!0)}else this.soltNameLen="订单名称不能为空",this.isAtive=!0},onFocuscontrac:function(){this.contractNLen="最多可输入120个字符",this.isAtiveContractNo=!1},contracDataNum:function(){if(this.contractNo){null==this.contractNo.match(/^[\s\S]{1,120}$/)&&(this.contractNLen="长度超过120个字符",this.isAtiveContractNo=!0)}else this.contractNLen="合同号不能为空",this.isAtiveContractNo=!0}}},a={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Modal",{attrs:{title:"修改订单",styles:{width:"100%"},"class-name":"modal-box"},model:{value:t.modal2,callback:function(e){t.modal2=e},expression:"modal2"}},[r("div",{staticClass:"master-content"},[r("div",{staticClass:"row"},[r("label",[t._v("订单名称:")]),t._v(" "),r("Input",{staticStyle:{width:"300px"},attrs:{type:"text",name:"orderName",placeholder:""},on:{"on-blur":t.userDataNum,"on-focus":t.onFocusName},model:{value:t.orderName,callback:function(e){t.orderName=e},expression:"orderName"}}),t._v(" "),r("span",{staticClass:"label-right",class:{"label-right-active":t.isAtive}},[t._v(t._s(t.soltNameLen))])],1),t._v(" "),r("div",{staticClass:"row"},[r("label",[t._v("广告客户:")]),t._v(" "),r("div",{staticClass:"main-element"},[r("el-select",{staticStyle:{width:"300px"},attrs:{filterable:"",placeholder:"请选择"},model:{value:t.customId,callback:function(e){t.customId=e},expression:"customId"}},t._l(t.customList,function(t){return r("el-option",{key:t.fxAdCustomId,attrs:{label:t.customName,value:t.fxAdCustomId}})}))],1),t._v(" "),t._e()],2),t._v(" "),r("div",{staticClass:"row"},[r("label",[t._v("合同号:")]),t._v(" "),r("Input",{staticStyle:{width:"300px"},attrs:{type:"text",name:"contractNo",placeholder:""},on:{"on-blur":t.contracDataNum,"on-focus":t.onFocuscontrac},model:{value:t.contractNo,callback:function(e){t.contractNo=e},expression:"contractNo"}}),t._v(" "),r("span",{staticClass:"label-right",class:{"label-right-active":t.isAtiveContractNo}},[t._v(t._s(t.contractNLen))])],1)]),t._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"text"},on:{click:t.cancel}},[t._v("取消")]),t._v(" "),r("Button",{staticClass:"btnColor",attrs:{type:"primary"},on:{click:t.updateOrder}},[t._v("保存并启用")])],1)])],1)},staticRenderFns:[]};var s=r("vSla")(o,a,!1,function(t){r("lZ06")},"data-v-2d82611f",null);e.default=s.exports},zxuE:function(t,e){}});
//# sourceMappingURL=4.80b0005a36d99f650e6e.js.map