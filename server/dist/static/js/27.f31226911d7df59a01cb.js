webpackJsonp([27],{PfoP:function(t,a){},rMHS:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("Ldyx"),s=e("5YEj"),o=e.n(s),r={components:{topTitle:i.a},data:function(){var t=this;return{adClickNum:"0",adShowNum:"0",adRate:"0",startDay:"",endDay:"",pageSize:10,pageNo:1,totalCount:0,dataClickNum:[],dataShowNum:[],dataAdDateDay:[],datesValue:[],myChart:"",chartArr:[],chartColor:"#d6eaff",downloadUrl:"",modal1:!1,bolChart:!1,optionsDisable:{disabledDate:function(t){var a=new Date-2592e6;return t&&t.valueOf()<a||t&&t.valueOf()>=new Date}},reportColumns:[{title:"时间",key:"adDateDay"},{title:"展现量",key:"showNum",render:function(a,e){return a("span",t.splitNum(e.row.showNum))}},{title:"点击量",key:"clickNum",render:function(a,e){return a("span",t.splitNum(e.row.clickNum))}},{title:"点击率",key:"rate"}],adReportList:[]}},created:function(){},mounted:function(){this.startDay=this.getPreDate(-7),this.endDay=this.getPreDate(-1),this.dateRange=[this.startDay,this.endDay],this.myChart=o.a.init(document.getElementById("main")),this.getOverallTotalReport(),this.getOverallReportChart(),this.getOverallReportList()},methods:{initEcharts:function(){var t={title:{text:""},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},xAxis:{type:"category",boundaryGap:!1,data:this.dataAdDateDay},color:["#044b7c","#ea1107"],yAxis:[{name:"展现量",type:"value"},{name:"点击量",type:"value"}],minInterval:1,series:[{name:"展现量",data:this.dataShowNum,type:"line",areaStyle:{color:"#d6eaff"},lineStyle:{color:"#044b7c"}},{name:"点击量",data:this.dataClickNum,yAxisIndex:1,type:"line",areaStyle:{color:"#ffd6e1"},lineStyle:{color:"#ea1107"}}]};this.myChart.setOption(t)},splitNum:function(t){var a=/(\d)(?=(?:\d{3})+$)/g,e=(t+"").split(".");return 2==e.length?e[0].replace(a,"$1,")+"."+e[1]:e[0].replace(a,"$1,")},getOverallTotalReport:function(){var t=this,a="/report/getOverallTotalReport.json?startDay="+this.startDay+"&endDay="+this.endDay;this.$Http.get(a,{}).then(function(a){if(console.log(a),0==a.body.status){var e=a.body.data.result;""!=e&&(t.adClickNum=t.splitNum(e.clickNum),t.adShowNum=t.splitNum(e.showNum),t.adRate=e.rate)}})},getPreDate:function(t){var a=new Date;return a.setDate(a.getDate()+t),a.Format("yyyy-MM-dd")},getOverallReportChart:function(){var t=this,a="/report/getOverallReportChart.json?startDay="+this.startDay+"&endDay="+this.endDay;this.$Http.get(a,{}).then(function(a){if(0==a.body.status){var e=a.body.data.result,i=[],s=[];t.dataAdDateDay=[],t.dataClickNum=[],t.dataShowNum=[],e.forEach(function(a,e){console.log(a.clickNum),console.log(a.showNum),i.push(a.clickNum),s.push(a.showNum),t.dataAdDateDay.push(a.adDateDay)}),t.dataClickNum=i,t.dataShowNum=s,t.myChart.clear(),t.initEcharts()}})},confrimDownLoad:function(){var t=sessionStorage.getItem("token");this.downloadUrl=this.ApiUrl+"/report/downloadAllReport.json?startDay="+this.startDay+"&endDay="+this.endDay+"&t="+t,window.location.href=this.downloadUrl},getOverallReportList:function(){var t=this,a="/report/getOverallReportList.json?startDay="+this.startDay+"&endDay="+this.endDay+"&pageSize="+this.pageSize+"&pageNo="+this.pageNo;this.$Http.get(a,{}).then(function(a){if(0==a.body.status){var e=a.body.data.result;t.totalCount=a.body.data.totalCount;t.adReportList=[],e.forEach(function(a,e){t.adReportList.push(a)})}})},changePageNo:function(t){console.log("pageNo=="+t),this.pageNo=t,this.getOverallReportList()},changePageSize:function(t){console.log("pageSize=="+t),this.pageNo=1,this.pageSize=t,this.getOverallReportList()},startTime:function(t){if(t.length<2||""==t[0]||""==t[1])return this.$Message.error("请选择日期范围"),!1;this.startDay=t[0],this.endDay=t[1],this.pageNo=1,this.getOverallTotalReport(),this.getOverallReportList(),this.getOverallReportChart()},showNum:function(){},clickNum:function(){}}},n={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"topTitle-wrap"},[t._m(0),t._v(" "),e("div",{staticStyle:{"margin-right":"20px"}},[e("ul",{staticClass:"myDatePicker",attrs:{slot:"mySolt"},slot:"mySolt"},[e("li",{staticClass:"myDatePicker_li"},[e("span",[t._v("日期范围")]),t._v(" "),e("DatePicker",{staticStyle:{width:"200px"},attrs:{value:t.dateRange,type:"daterange",placeholder:"",placement:"bottom-end",clearable:!1,editable:!1},on:{"on-change":t.startTime}})],1),t._v(" "),e("li",{staticClass:"myDatePicker_li"},[e("Button",{staticClass:"btnColor",attrs:{type:"primary",icon:"archive"},on:{click:t.confrimDownLoad}},[t._v("下载报告")])],1)])])]),t._v(" "),e("div",{staticClass:"fu"},[e("div",[e("ul",{staticClass:"top-wrap"},[e("li",[e("p",[t._v("广告展现量")]),t._v(" "),e("p",{staticClass:"count"},[t._v(t._s(t.adShowNum))])]),t._v(" "),e("li",[e("p",[t._v("广告点击量")]),t._v(" "),e("p",{staticClass:"count"},[t._v(t._s(t.adClickNum))])]),t._v(" "),e("li",[e("p",[t._v("广告点击率")]),t._v(" "),e("p",{staticClass:"count"},[t._v(t._s(t.adRate))])])])]),t._v(" "),e("div",{staticStyle:{"justify-content":"center",display:"flex"},attrs:{id:"main"}}),t._v(" "),e("div",{staticClass:"ract-wrap"},[e("div",{on:{click:t.showNum}},[e("span",{staticClass:"showRact"}),t._v(" "),e("span",[t._v("展现量")])]),t._v(" "),e("div",{staticClass:"ract-wrap",on:{click:t.clickNum}},[e("span",{staticClass:"clickRact"}),t._v(" "),e("span",[t._v("点击量")])])]),t._v(" "),e("Table",{attrs:{border:"",columns:t.reportColumns,data:t.adReportList}}),t._v(" "),e("Page",{attrs:{total:t.totalCount,current:t.pageNo,"show-sizer":"","show-total":""},on:{"on-change":t.changePageNo,"on-page-size-change":t.changePageSize}})],1)])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",[a("span",{staticClass:"tpTitle"},[this._v("整体报告")])])}]};var l=e("vSla")(r,n,!1,function(t){e("PfoP")},"data-v-08ee9da6",null);a.default=l.exports}});
//# sourceMappingURL=27.f31226911d7df59a01cb.js.map