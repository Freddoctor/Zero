webpackJsonp([3],{"/RSp":function(e,t){},"0t9E":function(e,t){},"3LKS":function(e,t){},B5M2:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("Ldyx"),s={data:function(){return{selectedOptions:[],modal:!1,codeMang:"",codeName:"",codeGroup:[],fxAdCodeGroupId:[],codeDesc:"",invalidName:!1,invalidDesc:!1,invalidNameTip:"最多可输入30个字符",invalidDescTip:"最多可输入100个字符",isNative:1}},created:function(){this.getCodeGroup()},methods:{beforeLoad:function(){this.fxAdCodeGroupId=[],this.codeName="",this.codeDesc="",this.modal=!0},checkCodeName:function(){if(this.codeName){null==this.codeName.match(/[^\%\&\$]{1,30}$/)&&(this.invalidNameTip="长度超过30个字符",this.invalidName=!0)}else this.invalidNameTip="不能为空",this.invalidName=!0},focusName:function(){this.invalidNameTip="最多可输入30个字符",this.invalidName=!1},checkCodeDesc:function(){if(this.codeDesc){null==this.codeDesc.match(/^[\s\S]{0,100}$/)&&(this.invalidDescTip="长度超过100个字符",this.invalidDesc=!0)}},focusDesc:function(){this.invalidDescTip="最多可输入100个字符",this.invalidDesc=!1},getCodeGroup:function(){var e=this;this.$Http.get("/common/getCodeGroupStageList.json?",{}).then(function(t){if(e.codeGroup=[],0===t.body.status){console.log(t);for(var o=t.body.data.resourceList,a={},s={},i=0;i<o.length;i++){if(a={value:o[i].id,label:o[i].name},o[i].childList.length>0){a.children=[];for(var n=0;n<o[i].childList.length;n++)s={value:o[i].childList[n].id,label:o[i].childList[n].name},a.children.push(s)}e.codeGroup.push(a)}console.log(e.codeGroup)}})},changeOption:function(e){2===e.length?this.codeGroupId=e[1]:this.codeGroupId=e[0],console.log(this.codeGroupId)},codeAjax:function(){var e=this,t="/code/createCode.json?codeGroupId="+this.codeGroupId+"&codeName="+encodeURIComponent(this.codeName)+"&isNative="+this.isNative+"&codeDesc="+encodeURIComponent(this.codeDesc);this.$Http.get(t,{}).then(function(t){0==t.body.status&&(console.log(t),e.modal=!1,e.$emit("filterParent"))})},creatCode:function(){if(this.codeName&&this.fxAdCodeGroupId.length)this.codeAjax();else{if(!this.fxAdCodeGroupId.length)return this.$Message.error("代码位分组不能为空!"),!1;if(!this.codeName)return this.$Message.error("代码位名称不能为空!"),!1}}}},i={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{},[o("Modal",{attrs:{title:"新建代码位",styles:{width:"100%"},"class-name":"modal-box"},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[o("ul",{staticClass:"newCode-wrap"},[o("li",{staticClass:"newCode-child"},[o("span",[e._v("代码位分组：")]),e._v(" "),o("div",{staticClass:"main-element"},[o("el-cascader",{staticStyle:{width:"200px"},attrs:{options:e.codeGroup,"change-on-select":"",filterable:"",clearable:""},on:{change:e.changeOption},model:{value:e.fxAdCodeGroupId,callback:function(t){e.fxAdCodeGroupId=t},expression:"fxAdCodeGroupId"}})],1)]),e._v(" "),o("li",{staticClass:"newCode-child"},[o("span",[e._v("代码位名称：")]),e._v(" "),o("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入代码位名称"},on:{"on-blur":e.checkCodeName,"on-focus":e.focusName},model:{value:e.codeName,callback:function(t){e.codeName=t},expression:"codeName"}}),e._v(" "),o("span",{staticClass:"label-right",class:{"label-right-active":e.invalidName}},[e._v(e._s(e.invalidNameTip))])],1),e._v(" "),o("li",{staticClass:"newCode-child"},[o("span",[e._v("代码位描述：")]),e._v(" "),o("Input",{staticStyle:{width:"300px"},attrs:{type:"textarea",rows:8,placeholder:"请输入代码位描述"},on:{"on-blur":e.checkCodeDesc,"on-focus":e.focusDesc},model:{value:e.codeDesc,callback:function(t){e.codeDesc=t},expression:"codeDesc"}}),e._v(" "),o("span",{staticClass:"label-right",class:{"label-right-active":e.invalidDesc}},[e._v(e._s(e.invalidDescTip))])],1)]),e._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{type:"text"},on:{click:function(t){e.modal=!1}}},[e._v("取消")]),e._v(" "),o("Button",{staticClass:"btnColor",attrs:{type:"primary"},on:{click:e.creatCode}},[e._v("保存并启用")])],1)])],1)},staticRenderFns:[]};var n=o("vSla")(s,i,!1,function(e){o("3LKS")},null,null).exports,d={data:function(){return{isAtive:!1,modal:!1,radios:"1",isNative:"",site:!0,channel:!1,soltNameLen:"最多可输入100个字符",types:"",groupName:"",isUserAtive:!1,websiteList:[],parentGroupId:""}},created:function(){this.getWebsite()},methods:{beforeLoad:function(){this.soltNameLen="最多可输入100个字符",this.isAtive=!1,this.radios="1",this.isNative="",this.groupName="",this.parentGroupId="","1"==this.radios?(this.site=!0,this.channel=!1):(this.site=!1,this.channel=!0),this.modal=!0},cancel:function(){this.soltNameLen="长度不能超过100个字符",this.isAtive=!1,this.modal=!1},selectRadio:function(e){"1"==e?(this.site=!0,this.channel=!1):(this.site=!1,this.channel=!0)},getWebsite:function(){var e=this;this.$Http.get("/common/getWebsiteList.json?",{}).then(function(t){console.log(t),0===t.body.status&&(e.websiteList=t.body.data.websiteList)})},createCodeGroup:function(){var e=this,t="/codeGroup/createCodeGroup.json?codeGroupType="+this.radios+"&codeGroupName="+encodeURIComponent(this.groupName);this.site?t+="&isNative="+this.isNative:t+="&parentGroupId="+this.parentGroupId,this.$Http.get(t,{}).then(function(t){console.log(t),0===t.body.status&&(e.modal=!1,e.getWebsite(),e.$emit("filterParent"))})},onFocusName:function(){this.soltNameLen="最多可输入100个字符",this.isAtive=!1},userDataNum:function(){if(this.groupName){null==this.groupName.match(/^[\s\S]{1,100}$/)&&(this.soltNameLen="长度超过100个字符",this.isAtive=!0)}else this.soltNameLen="物料名称不能为空",this.isAtive=!0}}},r={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("Modal",{attrs:{title:"新建代码位分组",styles:{width:"100%"},"class-name":"modal-box"},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[o("div",[o("div",{staticStyle:{display:"flex"}},[o("div",[e._v("分组类型：")]),e._v(" "),o("RadioGroup",{on:{"on-change":e.selectRadio},model:{value:e.radios,callback:function(t){e.radios=t},expression:"radios"}},[o("Radio",{attrs:{value:"1",label:"1"}},[o("span",[e._v("站点")])]),e._v(" "),o("Radio",{attrs:{value:"2",label:"2"}},[o("span",[e._v("频道")])])],1)],1),e._v(" "),o("div",[o("div",{directives:[{name:"show",rawName:"v-show",value:e.site,expression:"site"}],staticClass:"site"},[o("ul",[o("li",{staticClass:"sote-child"},[o("span",{staticClass:"label-left"},[e._v("所属类型：")]),e._v(" "),o("Select",{staticStyle:{width:"200px"},on:{"on-change":function(e){}},model:{value:e.isNative,callback:function(t){e.isNative=t},expression:"isNative"}},[o("Option",{attrs:{value:"1"}},[e._v("原生")]),e._v(" "),o("Option",{attrs:{value:"0"}},[e._v("非原生")])],1)],1)])]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.channel,expression:"channel"}],staticClass:"channel"},[o("ul",[o("li",{staticClass:"sote-child"},[o("span",{staticClass:"label-left"},[e._v("所属站点：")]),e._v(" "),o("Select",{staticStyle:{width:"200px"},on:{"on-change":function(e){}},model:{value:e.parentGroupId,callback:function(t){e.parentGroupId=t},expression:"parentGroupId"}},e._l(e.websiteList,function(t,a){return o("Option",{key:a,attrs:{value:t.id}},[e._v(e._s(t.name))])}))],1)])]),e._v(" "),o("div",{staticClass:"sote-child"},[o("span",{staticClass:"label-left"},[e._v("分组名称：")]),e._v(" "),o("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入分组名称"},on:{"on-blur":e.userDataNum,"on-focus":e.onFocusName},model:{value:e.groupName,callback:function(t){e.groupName=t},expression:"groupName"}}),e._v(" "),o("span",{staticClass:"label-right",class:{"label-right-active":e.isAtive}},[e._v(e._s(e.soltNameLen))])],1)])]),e._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{type:"text"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),o("Button",{staticClass:"btnColor",attrs:{type:"primary"},on:{click:e.createCodeGroup}},[e._v("保存并启用")])],1)])],1)},staticRenderFns:[]};var l=o("vSla")(d,r,!1,function(e){o("Mkjg")},null,null).exports,c={data:function(){return{selectedOptions:[],modal:!1,codeMang:"",codeName:"",codeGroup:[],fxAdCodeGroupId:"",codeDesc:"",invalidName:!1,invalidDesc:!1,invalidNameTip:"最多可输入30个字符",invalidDescTip:"最多可输入100个字符",isNative:"",saveDesc:"",codeCascaderModel:[1,2]}},created:function(){this.getCodeGroup()},methods:{beforeLoad:function(e){console.log(e+"       ==="),this.codeName="",this.modal=!0,this.saveDesc=0==e?"完成":"保存并启用"},checkCodeName:function(){if(this.codeName){null==this.codeName.match(/^[\s\S]{1,30}$/)&&(this.invalidNameTip="长度超过30个字符",this.invalidName=!0)}else this.invalidNameTip="不能为空",this.invalidName=!0},focusName:function(){this.invalidNameTip="最多可输入30个字符",this.invalidName=!1},checkCodeDesc:function(){if(this.codeDesc){null==this.codeDesc.match(/^[\s\S]{0,100}$/)&&(this.invalidDescTip="长度超过100个字符",this.invalidDesc=!0)}},focusDesc:function(){this.invalidDescTip="最多可输入100个字符",this.invalidDesc=!1},jsonToExtend:function(e,t){for(var o=0;o<json.length;o++)json[o][e]=json[o][t],delete json[o][t]},getCodeGroup:function(){var e=this;this.$Http.get("/common/getCodeGroupStageList.json?",{}).then(function(t){if(e.codeGroup=[],0===t.body.status){console.log(t);for(var o=t.body.data.resourceList,a={},s={},i=0;i<o.length;i++){if(a={value:o[i].id,label:o[i].name},o[i].childList.length>0){a.children=[];for(var n=0;n<o[i].childList.length;n++)s={value:o[i].childList[n].id,label:o[i].childList[n].name},a.children.push(s)}e.codeGroup.push(a)}console.log(e.codeGroup)}})},changeOption:function(e,t){2===e.length?this.codeGroupId=e[1]:this.codeGroupId=e[0],console.log("///////////////////////"),console.log(e,t,this.codeCascaderModel),console.log("///////////////////////")},upCodeAjax:function(){var e=this,t="code/updateCode.json?codeGroupId="+this.codeGroupId+"&codeName="+encodeURIComponent(this.codeName)+"&isNative="+this.isNative+"&codeId="+this.codeId+"&codeDesc="+encodeURIComponent(this.codeDesc);this.$Http.get(t,{}).then(function(t){0==t.body.status&&(console.log(t),e.modal=!1,e.$emit("filterParent"))})},updataCode:function(){if(this.codeName&&this.codeCascaderModel.length)this.upCodeAjax();else{if(!this.codeCascaderModel.length)return this.$Message.error("代码位分组不能为空!"),!1;if(!this.codeName)return this.$Message.error("代码位名称不能为空!"),!1}},getCodeById:function(e){var t=this;this.codeCascaderModel=[];var o="/code/getCodeById.json?codeId="+e;this.$Http.get(o,{}).then(function(e){if(0==e.body.status){var o=e.body.data;console.log(e),t.codeName=o.codeName,t.codeGroupId=o.fxAdCodeGroupId,t.codeId=o.fxAdCodeId,t.codeDesc=o.codeDesc;var a=[parseInt(o.parentGroupId?o.parentGroupId:0),parseInt(o.fxAdCodeGroupId)];t.codeCascaderModel=a,console.log(t.codeCascaderModel),t.$emit("filterParent")}})}}},u={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{},[o("Modal",{attrs:{title:"修改代码位",styles:{width:"100%"},"class-name":"modal-box"},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[o("ul",{staticClass:"newCode-wrap"},[o("li",{staticClass:"newCode-child"},[o("span",[e._v("代码位分组：")]),e._v(" "),o("div",{staticClass:"main-element"},[o("el-cascader",{staticStyle:{width:"200px"},attrs:{options:e.codeGroup,"change-on-select":"",filterable:"",clearable:""},on:{change:e.changeOption},model:{value:e.codeCascaderModel,callback:function(t){e.codeCascaderModel=t},expression:"codeCascaderModel"}})],1)]),e._v(" "),o("li",{staticClass:"newCode-child"},[o("span",[e._v("代码位名称：")]),e._v(" "),o("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入代码位名称"},on:{"on-blur":e.checkCodeName,"on-focus":e.focusName},model:{value:e.codeName,callback:function(t){e.codeName=t},expression:"codeName"}}),e._v(" "),o("span",{staticClass:"label-right",class:{"label-right-active":e.invalidName}},[e._v(e._s(e.invalidNameTip))])],1),e._v(" "),o("li",{staticClass:"newCode-child"},[o("span",[e._v("代码位描述：")]),e._v(" "),o("Input",{staticStyle:{width:"300px"},attrs:{type:"textarea",rows:8,placeholder:"请输入代码位描述"},on:{"on-blur":e.checkCodeDesc,"on-focus":e.focusDesc},model:{value:e.codeDesc,callback:function(t){e.codeDesc=t},expression:"codeDesc"}}),e._v(" "),o("span",{staticClass:"label-right",class:{"label-right-active":e.invalidDesc}},[e._v(e._s(e.invalidDescTip))])],1)]),e._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{type:"text"},on:{click:function(t){e.modal=!1}}},[e._v("取消")]),e._v(" "),o("Button",{staticClass:"btnColor",attrs:{type:"primary"},domProps:{textContent:e._s(e.saveDesc)},on:{click:e.updataCode}})],1)])],1)},staticRenderFns:[]};var p=o("vSla")(c,u,!1,function(e){o("Q/Gc")},null,null).exports,h={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{},[o("Modal",{attrs:{title:"查看代码位",styles:{width:"100%"},"class-name":"modal-box"},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[o("ul",{staticClass:"newCode-wrap"},[o("li",{staticClass:"newCode-child flex-box-content"},[o("span",{domProps:{textContent:e._s("<head>代码")}}),e._v(" "),o("textarea",{directives:[{name:"model",rawName:"v-model",value:e.headDesc,expression:"headDesc"}],staticClass:"text",staticStyle:{width:"800px"},attrs:{type:"textarea",rows:"1",placeholder:"请输入代码位名称"},domProps:{value:e.headDesc},on:{input:function(t){t.target.composing||(e.headDesc=t.target.value)}}})]),e._v(" "),o("li",{staticClass:"newCode-child flex-box-content"},[o("span",{domProps:{textContent:e._s("<body>代码")}}),e._v(" "),o("textarea",{directives:[{name:"model",rawName:"v-model",value:e.bodyDesc,expression:"bodyDesc"}],staticClass:"text",staticStyle:{width:"800px"},attrs:{type:"textarea",rows:"14",placeholder:"请输入代码位名称"},domProps:{value:e.bodyDesc},on:{input:function(t){t.target.composing||(e.bodyDesc=t.target.value)}}})])]),e._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{type:"text"},on:{click:function(t){e.modal=!1}}},[e._v("取消")]),e._v(" "),o("Button",{staticClass:"btnColor",attrs:{type:"primary"},on:{click:function(t){e.modal=!1}}},[e._v("完成")])],1)])],1)},staticRenderFns:[]};var v=o("vSla")({data:function(){return{modal:!1,codeMang:"",codeName:"",codeGroup:[],fxAdCodeId:"",codeDesc:"",isNative:"",saveDesc:"",headDesc:"",bodyDesc:"",codeCascaderModel:[1,2]}},created:function(){},methods:{beforeLoad:function(e){this.modal=!0,this.headDesc='<@ src="http://192.168.30.190:8091/static/js/ad.js"></@>'.replace(/@/g,"script"),this.bodyDesc="<@>\n\tvar s = \"_\" + Math.random().toString(36).slice(2);\n\tdocument.write('<div id=\"' + s + '\"></div>');\n\t//同步加载方法，直接加载到页面；若使用 jQuery，不要放到 $(document).ready 中调用\n\tShowAd({\n\t\tcodeId: #,\n\t\tcontainer: s\n\t})\n\t//异步加载方法，会生成 iframe 并将内容放入\n\tShowAdAsync({\n\t\tcodeId: #,\n\t\tcontainer: s\n\t})\n</@>".replace(/@/g,"script").replace(/#/g,e)}}},h,!1,function(e){o("RcYr")},null,null).exports,f=o("HzJ8"),m=o.n(f),g=o("svPy"),C=o("vx/n"),y=o("CXxF"),b=o("TMWT"),G=o("bwEE"),N={components:{adNative:g.default,unadNative:C.default,adNativeUpdate:y.a,unadNativeUpdate:b.a,useMaterial:G.a},data:function(){var e=this;return{modal:!1,loading:!1,deliverId:"",columns:[{title:"名称",key:"name"},{title:"载体类型",key:"type"},{title:"状态",key:"state"},{title:"代码位",key:"codeBit",render:function(e,t){var o=t.row.deliverCodeList;if(1==o.length)return e("div",o[0].codeName);if(o.length>1){var a=o.length,s="";return o.forEach(function(e){s+=e.codeName+"\n"}),e("div",[e("Poptip",{props:{content:s}},[e("a",a+"个广告位")])])}}},{title:"物料",key:"material",render:function(t,o){var a=o.row.deliverMaterialList,s=a.map(function(e,t){return e.id});return t("div",[t("a",{style:{"text-decoration":"underline"},on:{click:function(){e.$refs.useMaterial.beforeLoad(a.length),e.$refs.useMaterial.getMaterialListByIds(s.join(","))}}},a.length+"个物料")])}},{title:"总权重",key:"totalWeightNum",width:80},{title:"优先级",key:"priority",width:80},{title:"投放日期",key:"date",className:"deliver-date",width:200,render:function(t,o){return 1==o.row.dateType?t("a",{on:{click:function(){for(var t=o.row.deliverTimeList.reverse(),a="",s=0;s<t.length;s++){var i=t[s].startTime.substring(0,10),n=t[s].endTime.substring(0,10);a+=i==n?i+"<br/>":i+"至"+n+"<br/>"}e.$Modal.info({title:"不连续投放时间",content:a})}}},[t("Icon",{props:{type:"plus-circled"}}),t("span",o.row.date)]):t("span",o.row.date)}},{title:"进度",key:"schedule",width:150,render:function(e,t){return e("div"),[e("Progress",{props:{percent:t.row.schedule,status:"active",strokewidth:50}})]}},{title:"操作",key:"operate",width:150,render:function(t,o){var a=o.row.stateNums,s=o.row.typeNum,i=o.row.deliverId;return 0==a?t("div",[t("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px",backgroundColor:"#1fa2fd",borderColor:"#1fa2fd"},on:{click:function(){0==s&&e.$refs.unAdNativeUpdate.beforeLoad(i),1==s&&e.$refs.adNativeUpdate.beforeLoad(i)}}},"修改")]):1==a?t("div",[t("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px",backgroundColor:"#1fa2fd",borderColor:"#1fa2fd"},on:{click:function(){0==s&&e.$refs.unAdNativeUpdate.beforeLoad(i),1==s&&e.$refs.adNativeUpdate.beforeLoad(i)}}},"修改"),t("Button",{props:{type:"error",size:"small"},style:{backgroundColor:"#ea0b00",borderColor:"#ea0b00"},on:{click:function(){var t=[];t.push(o.row),e.deleteBox(t)}}},"删除")]):2==a?t("div",[t("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px",backgroundColor:"#1fa2fd",borderColor:"#1fa2fd"},on:{click:function(){0==s&&e.$refs.unAdNativeUpdate.beforeLoad(i),1==s&&e.$refs.adNativeUpdate.beforeLoad(i)}}},"修改"),t("Button",{props:{type:"error",size:"small"},style:{backgroundColor:"#ea0b00",borderColor:"#ea0b00"},on:{click:function(){var t=[];t.push(o.row),e.deleteBox(t)}}},"删除")]):3==a?t("div",[t("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px",backgroundColor:"#1fa2fd",borderColor:"#1fa2fd"},on:{click:function(){0==s&&e.$refs.unAdNativeUpdate.beforeLoad(i),1==s&&e.$refs.adNativeUpdate.beforeLoad(i)}}},"修改"),t("Button",{props:{type:"error",size:"small"},style:{backgroundColor:"#ea0b00",borderColor:"#ea0b00"},on:{click:function(){var t=[];t.push(o.row),e.deleteBox(t)}}},"删除")]):4==a?t("div",[t("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px",backgroundColor:"#1fa2fd",borderColor:"#1fa2fd"},on:{click:function(){0==s&&e.$refs.unAdNativeUpdate.beforeLoad(i),1==s&&e.$refs.adNativeUpdate.beforeLoad(i)}}},"修改"),t("Button",{props:{type:"error",size:"small"},style:{backgroundColor:"#ea0b00",borderColor:"#ea0b00"},on:{click:function(){var t=[];t.push(o.row),e.deleteBox(t)}}},"删除")]):5==a?t("div",[t("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px",backgroundColor:"#1fa2fd",borderColor:"#1fa2fd"},on:{click:function(){0==s&&e.$refs.unAdNativeUpdate.beforeLoad(i),1==s&&e.$refs.adNativeUpdate.beforeLoad(i)}}},"修改"),t("Button",{props:{type:"error",size:"small"},style:{backgroundColor:"#ea0b00",borderColor:"#ea0b00"},on:{click:function(){var t=[];t.push(o.row),e.deleteBox(t)}}},"删除")]):void 0}}],data:[]}},created:function(){},mounted:function(){},props:["adUses"],methods:{beforeLoad:function(){this.modal=!0},exitModal:function(){this.modal=!1,this.$emit("filterParent")},getDeliverById:function(e){var t=this;this.deliverId=e,this.loading=!0;var o="/deliver/getDeliverByIds.json?deliverIds="+e;this.$Http.get(o,{}).then(function(e){if(t.loading=!1,0==e.body.status){t.data=[],console.log(e.body.data);var o=e.body.data.list,a=!0,s=!1,i=void 0;try{for(var n,d=m()(o);!(a=(n=d.next()).done);a=!0){var r=n.value,l="",c="",u="";0==r.isNative?l="非原生":1==r.isNative&&(l="原生"),0==r.deliverStatus?c="删除":1==r.deliverStatus?c="草稿":2==r.deliverStatus?c="暂停":3==r.deliverStatus?c="待投放":4==r.deliverStatus?c="投放中":5==r.deliverStatus&&(c="投放完成"),1==r.level?u="独占":2==r.level?u="优先":3==r.level?u="标准":4==r.level&&(u="补余");var p=r.startDate,h=r.endDate,v=r.progressRate,f=p+"-"+h,g={name:r.deliverName,type:l,typeNum:r.isNative,state:c,stateNums:r.deliverStatus,totalWeightNum:r.totalWeightNum,deliverCodeList:r.fxadDeliverCodeList,deliverMaterialList:r.fxadDeliverMaterialList,priority:u,date:f,dateType:r.dateType,schedule:v,deliverId:r.fxAdDeliverId,deliverTimeList:r.deliverTimeList};t.data.push(g)}}catch(e){s=!0,i=e}finally{try{!a&&d.return&&d.return()}finally{if(s)throw i}}}})},getFilterData:function(){this.pageSize=10,this.pageNo=1,this.recoverFilterData()},recoverFilterData:function(){this.isStops=!0,this.isAdds=!0,this.isDeletes=!0,this.stopAdDeliverParams=[],this.addAdDeliverParams=[],this.deleteAdDeliverParams=[],this.getDeliverById(this.deliverId)},deleteBox:function(e){var t=this,o=e.map(function(e,t){return e.name}),a=e.map(function(e,t){return e.deliverId});this.$Modal.confirm({title:"删除广告投放",content:"你确定要删除"+o.join(","),onOk:function(){t.deleteDeliverData(a.join(","))}})},deleteDeliverData:function(e){var t=this,o="/deliver/deleteDeliver.json?deliverId="+e;this.$Http.get(o,{}).then(function(o){0==o.body.status&&(t.$Message.info("删除成功"),t.data.splice(t.data.findIndex(function(t){return t.deliverId==e}),1),t.adUses.useNums=t.data.length)})}}},_={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("Modal",{attrs:{title:e.adUses.useNums+"个有效广告",styles:{width:"100%"},"class-name":"modal-box"},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[o("Table",{staticClass:"table",attrs:{loading:e.loading,border:"",columns:e.columns,data:e.data}}),e._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{type:"text"},on:{click:e.exitModal}},[e._v("返回")])],1)],1),e._v(" "),o("ad-native",{ref:"adNative",on:{filterParent:e.getFilterData}}),e._v(" "),o("unad-native",{ref:"unAdNative",on:{filterParent:e.getFilterData}}),e._v(" "),o("ad-native-update",{ref:"adNativeUpdate",on:{filterParent:e.getFilterData}}),e._v(" "),o("unad-native-update",{ref:"unAdNativeUpdate",on:{filterParent:e.getFilterData}}),e._v(" "),o("use-material",{ref:"useMaterial",on:{filterParent:e.getFilterData}})],1)},staticRenderFns:[]};var w=o("vSla")(N,_,!1,function(e){o("0t9E")},null,null).exports,x={data:function(){return{modal:!1,radios:1,isNative:"",site:!0,channel:!1,soltUserName:"最多可输入100个字符",types:"",groupName:"",isUserAtive:!1,websiteList:[],parentGroupId:0}},created:function(){this.getWebsite()},methods:{beforeLoad:function(){this.radios="1",this.isNative="",this.groupName="",this.parentGroupId="",this.modal=!0},selectRadio:function(e){"1"==e?(this.site=!0,this.channel=!1):(this.site=!1,this.channel=!0)},getWebsite:function(){var e=this;this.$Http.get("/common/getWebsiteList.json?",{}).then(function(t){console.log(t),0===t.body.status&&(e.websiteList=t.body.data.websiteList)})},updataCodeGroup:function(){var e=this,t="/codeGroup/updateCodeGroup.json?codeGroupType="+this.radios+"&isNative="+this.isNative+"&codeGroupName="+encodeURIComponent(this.groupName)+"&parentGroupId="+this.parentGroupId+"&codeGroupId="+this.codeGroupId;this.$Http.get(t,{}).then(function(t){console.log(t),0===t.body.status&&(e.modal=!1,e.$emit("filterParent"))})},getCodeGroupById:function(e){var t=this;this.codeGroupId=e;var o="/codeGroup/getCodeGroupById.json?codeGroupId="+e;this.$Http.get(o,{}).then(function(e){console.log(e),0===e.body.status&&(t.groupName=e.body.data.codeGroupName,t.radios=e.body.data.codeGroupType,t.isNative=e.body.data.isNative,t.parentGroupId=e.body.data.parentGroupId,console.log(t.parentGroupId),"1"==t.radios?(t.site=!0,t.channel=!1):(t.site=!1,t.channel=!0))})}}},D={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("Modal",{attrs:{title:"新建代码位分组",styles:{width:"100%"},"class-name":"modal-box"},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[o("div",[o("div",{staticStyle:{display:"flex"}},[o("div",[e._v("分组类型：")]),e._v(" "),o("RadioGroup",{on:{"on-change":e.selectRadio},model:{value:e.radios,callback:function(t){e.radios=t},expression:"radios"}},[o("Radio",{attrs:{value:1,label:1}},[o("span",[e._v("站点")])]),e._v(" "),o("Radio",{attrs:{value:2,label:2}},[o("span",[e._v("频道")])])],1)],1),e._v(" "),o("div",[o("div",{directives:[{name:"show",rawName:"v-show",value:e.site,expression:"site"}],staticClass:"site"},[o("ul",[o("li",{staticClass:"sote-child"},[o("span",{staticClass:"label-left"},[e._v("所属类型：")]),e._v(" "),o("Select",{staticStyle:{width:"200px"},on:{"on-change":function(e){}},model:{value:e.isNative,callback:function(t){e.isNative=t},expression:"isNative"}},[o("Option",{attrs:{value:1}},[e._v("原生")]),e._v(" "),o("Option",{attrs:{value:0}},[e._v("非原生")])],1)],1)])]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.channel,expression:"channel"}],staticClass:"channel"},[o("ul",[o("li",{staticClass:"sote-child"},[o("span",{staticClass:"label-left"},[e._v("所属站点：")]),e._v(" "),o("Select",{staticStyle:{width:"200px"},on:{"on-change":function(e){}},model:{value:e.parentGroupId,callback:function(t){e.parentGroupId=t},expression:"parentGroupId"}},e._l(e.websiteList,function(t,a){return o("Option",{key:a,attrs:{value:t.id}},[e._v(e._s(t.name))])}))],1)])]),e._v(" "),o("div",{staticClass:"sote-child"},[o("span",{staticClass:"label-left"},[e._v("分组名称：")]),e._v(" "),o("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入分组名称"},model:{value:e.groupName,callback:function(t){e.groupName=t},expression:"groupName"}}),e._v(" "),o("span",{staticClass:"label-right",class:{"label-right-active":e.isUserAtive}},[e._v(e._s(e.soltUserName))])],1)])]),e._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{type:"text"},on:{click:function(t){e.modal=!1}}},[e._v("取消")]),e._v(" "),o("Button",{staticClass:"btnColor",attrs:{type:"primary"},on:{click:e.updataCodeGroup}},[e._v("修改并启用")])],1)])],1)},staticRenderFns:[]};var k=o("vSla")(x,D,!1,function(e){o("/RSp")},"data-v-6686eaf0",null).exports,I=o("5YEj"),S=o.n(I),L={components:{topTitle:a.a},data:function(){return{loadingGroup:!0,codeArr:[],codeNameTitle:"",codeGroupNameTitle:"",dataClickNum:[],dataShowNum:[],dataAdDateDay:[],changeCode:"",modal:!1,value1:"",myChart:"",day7Count:"",day30Count:"",yesterdayCount:"",startDay:"",endDay:"",dateRange:[],pageSize:10,pageNo:1,codeId:"",codeGroupId:"",codeGroup:[],nameLike:"",selectMode:1,codeByCodeGroupList:[],data:[],codeGroupData:[],showNum:"",clickNum:"",clickRate:"",isShowCode:!0,isShowCodeGroup:!1,codeTotalCount:0,codeGroupTotalCount:0,dateDown:1,columns:[{title:"代码位名称",key:"codeName"},{title:"代码位Id",key:"codeId"},{title:"展现量",key:"showNum"},{title:"点击量",key:"cliclNum"},{title:"点击率",key:"cliclOdds"}],codeGroupColumns:[{title:"代码位分组名称",key:"codeGroupName"},{title:"代码位分组类型",key:"codeGroupType"},{title:"展现量",key:"showNum"},{title:"点击量",key:"cliclNum"},{title:"点击率",key:"cliclOdds"}]}},created:function(){},mounted:function(){this.startDay=this.getPreDate(-30),this.endDay=this.getPreDate(-1),this.dateRange=[this.startDay,this.endDay],this.myChart=S.a.init(document.getElementById("main"))},methods:{beforeLoad:function(){this.modal=!0,this.selectMode=1,this.startDay=this.getPreDate(-30),this.endDay=this.getPreDate(-1),this.dateRange=[this.startDay,this.endDay]},initTitle:function(e,t){var o=this;this.codeNameTitle=e,this.$Http.get("codeGroup/getCodeGroupById.json?codeGroupId="+t,{}).then(function(e){0===e.body.status&&(o.codeGroupNameTitle=e.body.data.codeGroupName)})},initEcharts:function(){var e={title:{text:""},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},xAxis:{type:"category",boundaryGap:!1,data:this.dataAdDateDay},yAxis:[{name:"展现量",type:"value"},{name:"点击量",type:"value"}],minInterval:1,series:[{name:"展现量",data:this.dataShowNum,type:"line",areaStyle:{color:"#d6eaff"},lineStyle:{color:"#044b7c"}},{name:"点击量",data:this.dataClickNum,yAxisIndex:1,type:"line",areaStyle:{color:"#ffd6e1"},lineStyle:{color:"#ea1107"}}]};this.myChart.setOption(e)},getPreDate:function(e){var t=new Date;return t.setDate(t.getDate()+e),t.Format("yyyy-MM-dd")},getCodeReportList:function(e,t){var o=this;this.codeGroupId=t,this.codeId=e;var a="/report/getCodeReportByCodeId.json?startDay="+this.startDay+"&endDay="+this.endDay+"&codeId="+e+"&pageSize="+this.pageSize+"&pageNo="+this.pageNo,s="";this.$Http.get(a,{}).then(function(e){if(0===e.body.status){console.log(e),o.data=[];var t=e.body.data.result;o.codeTotalCount=e.body.data.totalCount;for(var a=0;a<t.length;a++)s={codeName:t[a].showName,codeId:t[a].showId,showNum:t[a].showNum,cliclNum:t[a].clickNum,cliclOdds:t[a].rate},o.data.push(s)}})},getCodeGroupReportList:function(e,t){var o=this;this.codeGroupId=t,this.codeId=e;var a="/report/getCodeGroupReportListByGroupId.json?startDay="+this.startDay+"&endDay="+this.endDay+"&codeGroupId="+t+"&pageSize="+this.pageSize+"&pageNo="+this.pageNo,s="";this.$Http.get(a,{}).then(function(e){if(0===e.body.status){o.loadingGroup=!1,console.log(e),o.codeGroupData=[];var t=e.body.data.result;o.codeGroupTotalCount=e.body.data.totalCount;for(var a=0;a<t.length;a++)s={codeGroupName:t[a].showName,codeGroupType:1==t[a].codeGroupType?"站点":"频道",showNum:t[a].showNum,cliclNum:t[a].clickNum,cliclOdds:t[a].rate},o.codeGroupData.push(s)}})},getCodeReportChart:function(e){var t=this,o="/report/getCodeReportChartByCodeId.json?startDay="+this.startDay+"&endDay="+this.endDay+"&codeId="+e;this.$Http.get(o,{}).then(function(e){if(0===e.body.status){console.log(e),t.dataAdDateDay=[],t.dataClickNum=[],t.dataShowNum=[];var o=[],a=[];e.body.data.result.forEach(function(e,s){o.push(e.clickNum),a.push(e.showNum),t.dataAdDateDay.push(e.adDateDay)}),t.dataClickNum=o.reverse(),t.dataShowNum=a.reverse(),t.dataAdDateDay.reverse(),t.myChart.clear(),t.initEcharts()}})},getCodeGroupReportChart:function(){var e=this,t="/report/getCodeGroupReportChartByGroupId.json?startDay="+this.startDay+"&endDay="+this.endDay+"&codeGroupId="+this.codeGroupId;this.$Http.get(t,{}).then(function(t){if(console.log(t),0===t.body.status){e.dataAdDateDay=[],e.dataClickNum=[],e.dataShowNum=[];var o=[],a=[];t.body.data.result.forEach(function(t,s){o.push(t.clickNum),a.push(t.showNum),e.dataAdDateDay.push(t.adDateDay)}),e.dataAdDateDay.reverse(),e.dataClickNum=o.reverse(),e.dataShowNum=a.reverse(),e.dataAdDateDay.reverse(),e.myChart.clear(),e.initEcharts()}})},changeReport:function(e){console.log(e),this.dateDown=e,1===e?(this.dateDown=e,this.isShowCode=!0,this.isShowCodeGroup=!1,this.getCodeReportChart(this.codeId),this.getCodeReportList(this.codeId,this.codeGroupId)):2===e&&(this.isShowCode=!1,this.isShowCodeGroup=!0,this.getCodeGroupReportChart(),this.getCodeGroupReportList(this.codeId,this.codeGroupId))},startTime:function(e){if(e.length<2||""==e[0]||""==e[1])return this.$Message.error("请选择日期范围"),!1;this.startDay=e[0],this.endDay=e[1],this.pageNo=1,this.getCodeReportChart(this.codeId),this.getCodeReportList(this.codeId,this.codeGroupId)},changePageNoCodeGroup:function(e){this.loadingGroup=!0,this.pageNo=e,this.selectModeList()},changePageSize:function(e){this.loadingGroup=!0,this.pageSize=e,this.pageNo=1,this.selectModeList()},selectModeList:function(){1==this.dateDown?(this.pageNo=1,this.getCodeReportList(this.codeId,this.codeGroupId)):(this.pageNo=1,this.getCodeGroupReportList(this.codeId,this.codeGroupId))},confrimDownLoad:function(){var e=sessionStorage.getItem("token");1==this.dateDown?window.location.href=this.ApiUrl+"/report/downloadCodeReportList.json?startDay="+this.startDay+"&endDay="+this.endDay+"&codeId="+this.codeId+"&t="+e:window.location.href=this.ApiUrl+"/report/downloadCodeGroupReportListByGroupId.json?startDay="+this.startDay+"&endDay="+this.endDay+"&codeGroupId="+this.codeGroupId+"&t="+e}}},A={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("Modal",{attrs:{styles:{width:"100%"},"class-name":"modal-box"},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[o("div",{staticClass:"topTitle-wrap"},[o("div",[o("span",{staticStyle:{color:"#1c2438","font-size":"14px"}},[e._v("整体报告 >")]),e._v(" "),o("span",{staticStyle:{color:"#12bdce"}},[e._v("代码位报告")]),e._v(" "),o("span",[e._v("（代码位："+e._s(e.codeNameTitle)+" ，代码位分组："+e._s(e.codeGroupNameTitle)+"）")])]),e._v(" "),o("ul",{staticClass:"myDatePicker",attrs:{slot:"mySolt"},slot:"mySolt"},[o("li",{staticClass:"myDatePicker_li"},[o("span",[e._v("日期范围")]),e._v(" "),o("DatePicker",{staticStyle:{width:"200px"},attrs:{value:e.dateRange,type:"daterange",placeholder:"",placement:"bottom-end",clearable:!1,editable:!1},on:{"on-change":e.startTime}})],1),e._v(" "),o("li",{staticClass:"myDatePicker_li"},[o("Button",{staticClass:"btnColor",staticStyle:{"margin-right":"50px"},attrs:{icon:"archive",type:"text"},on:{click:e.confrimDownLoad}},[e._v("\n                        下载报告\n                    ")])],1)])]),e._v(" "),o("RadioGroup",{staticStyle:{margin:"20px"},attrs:{type:"button",size:"large"},on:{"on-change":e.changeReport},model:{value:e.selectMode,callback:function(t){e.selectMode=t},expression:"selectMode"}},[o("Radio",{attrs:{label:1}},[e._v("代码位报告")]),e._v(" "),o("Radio",{attrs:{label:2}},[e._v("代码位分组报告")])],1),e._v(" "),o("div",{attrs:{id:"main"}}),e._v(" "),o("div",{staticClass:"ract-wrap"},[o("div",[o("span",{staticClass:"showRact"}),e._v(" "),o("span",[e._v("展现量")])]),e._v(" "),o("div",{staticClass:"ract-wrap"},[o("span",{staticClass:"clickRact"}),e._v(" "),o("span",[e._v("点击量")])])]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowCode,expression:"isShowCode"}],staticClass:"fu"},[o("Table",{attrs:{columns:e.columns,data:e.data}}),e._v(" "),o("Page",{staticStyle:{display:"flex","justify-content":"flex-end","margin-top":"5px","margin-bottom":"5px"},attrs:{total:e.codeTotalCount,current:e.pageNo,"show-sizer":"","show-total":""},on:{"on-change":e.changePageNoCodeGroup,"on-page-size-change":e.changePageSize}})],1),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowCodeGroup,expression:"isShowCodeGroup"}],staticClass:"fu"},[o("Table",{attrs:{columns:e.codeGroupColumns,loading:e.loadingGroup,data:e.codeGroupData}}),e._v(" "),o("Page",{staticStyle:{display:"flex","justify-content":"flex-end","margin-top":"5px","margin-bottom":"5px"},attrs:{total:e.codeGroupTotalCount,current:e.pageNo,"show-sizer":"","show-total":""},on:{"on-change":e.changePageNoCodeGroup,"on-page-size-change":e.changePageSize}})],1),e._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{staticClass:"btnColor ",attrs:{type:"text"},on:{click:function(t){e.modal=!1}}},[e._v("返回")])],1)],1)],1)},staticRenderFns:[]};var $=o("vSla")(L,A,!1,function(e){o("mgOT")},"data-v-45c86b72",null).exports,B={components:{topTitle:a.a,setNewCodeMang:n,setNewCodeGroup:l,updataCode:p,useAdStates:w,updataCodeGroup:k,report:$,seeCode:v},data:function(){var e=this;return{tenplate:null,selectedOptions:[],a:!0,value:"",loading:!0,loadingGroup:!0,modal1:!1,showBol2:!1,disabled:!0,sxIcon:"chevron-down",nameLike:"",nameLikeGroup:"",status:"",isNative:"",useStatus:"",pageSize:10,pageSizeGroup:10,totalCount:0,totalCountGroup:0,pageNo:1,pageNoGroup:1,codeSize:"",codeGroup:[],modelGroup:"全部",data1:[],dataGroup:[],isAdds:!0,isDeletes:!0,isStop:!0,isGroupDalete:!0,isGroupDaleteParams:[],addCodeParams:[],deleteCodeParams:[],useCodeParams:[],codeGroupId:"",adUseStates:"",columns:[{type:"selection",width:60,align:"center"},{title:"代码位名称",key:"codeName"},{title:"代码位Id",key:"fxAdCodeId",width:100},{title:"状态",key:"codeStatusstr",width:100},{title:"载体类型",key:"type",width:150},{title:"更新日期",key:"update"},{title:"使用情况",key:"use",render:function(t,o){return o.row.use>0?t("div",[t("a",{style:{"text-decoration":"underline"},on:{click:function(){e.adUseStates={useNums:o.row.use,deliverIds:o.row.deliverIds},e.$refs.useAdStates.beforeLoad(),e.$refs.useAdStates.getDeliverById(o.row.deliverIds)}}},o.row.use+"个有效广告")]):t("div",[t("p",{style:{},on:{click:function(){}}},o.row.use+"个有效广告")])}},{title:"操作",key:"operation",width:300,align:"center",render:function(t,o){var a=t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px",backgroundColor:"#0676c4",borderColor:"#0676c4"},on:{click:function(){e.$refs.report.beforeLoad(),e.$refs.report.initTitle(o.row.codeName,o.row.fxAdCodeGroupId),e.$refs.report.getCodeReportList(o.row.fxAdCodeId,o.row.fxAdCodeGroupId),e.$refs.report.getCodeReportChart(o.row.fxAdCodeId),e.$refs.report.getCodeGroupReportList(o.row.fxAdCodeId,o.row.fxAdCodeGroupId)}}},"报告"),s=t("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px",backgroundColor:"#19be6b",borderColor:"#19be6b"},on:{click:function(){e.$refs.seeCode.beforeLoad(o.row.fxAdCodeId)}}},"代码位"),i=t("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px",backgroundColor:"#1fa2fd",borderColor:"#1fa2fd"},on:{click:function(){e.$refs.updataCode.beforeLoad(o.row.codeStatus),e.$refs.updataCode.getCodeById(o.row.fxAdCodeId),e.$refs.updataCode.getCodeGroup()}}},"修改"),n=t("Button",{props:{type:"error",size:"small"},style:{marginRight:"5px",backgroundColor:"#ea0b00",borderColor:"#ea0b00"},on:{click:function(){var t=[];t.push(o.row),e.deleteBox(t)}}},"删除");return 0===o.row.codeStatus?t("div",[a]):0===o.row.isNative?t("div",[s,i,a,n]):t("div",[i,a,n])}}],columnsGroup:[{type:"selection",width:60,align:"center"},{title:"代码位分组名称",key:"codeName"},{title:"载体类型",key:"type"},{title:"更新日期",key:"update"},{title:"类型",key:"type2"},{title:"操作",key:"operation",width:200,align:"center",render:function(t,o){return t("div",[t("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px",backgroundColor:"#1fa2fd",borderColor:"#1fa2fd"},on:{click:function(){e.$refs.updataCodeGroup.beforeLoad(),e.$refs.updataCodeGroup.getCodeGroupById(o.row.fxAdCodeGroupId)}}},"修改"),t("Button",{props:{type:"error",size:"small"},style:{marginRight:"5px",backgroundColor:"#ea0b00",borderColor:"#ea0b00"},on:{click:function(){var t=[];t.push(o.row),e.deleteGroupBox(t)}}},"删除")])}}]}},created:function(){1==this.$route.params.flag&&(this.useStatus="3",this.sx()),this.getCodeGroup(),this.getCodeList(),this.codeGroupList()},methods:{selectData:function(e){console.log(e);var t=e.filter(function(e){return 0!=e.codeStatus}),o=e.filter(function(e){return 2==e.codeStatus}),a=e.filter(function(e){return 1==e.codeStatus});this.isAdds=!o.length>0,this.addCodeParams=o,this.isDeletes=!t.length>0,this.deleteCodeParams=t,this.isStop=!a.length>0,this.useCodeParams=a,console.log(this.useCodeParams)},selectGroupData:function(e){var t=e.filter(function(e){return e.codeGroupStatus});this.isGroupDaleteParams=t,this.isGroupDalete=!t.length>0,console.log(t)},deleteGroupAll:function(){this.deleteGroupBox(this.isGroupDaleteParams)},stopAll:function(){this.stopBox(this.useCodeParams)},deleteAll:function(){this.deleteBox(this.deleteCodeParams)},addAll:function(){this.addBox(this.addCodeParams)},addBox:function(e){var t=this,o=e.map(function(e,t){return e.codeName}),a=e.map(function(e,t){return e.fxAdCodeId});this.$Modal.confirm({title:"启动广告投放",content:"你确定要启动"+o.join(","),onOk:function(){t.addcodeData(a.join(","))}})},deleteGroupBox:function(e){var t=this;console.log(e);var o=e.map(function(e,t){return e.codeName}),a=e.map(function(e,t){return e.fxAdCodeGroupId});this.$Modal.confirm({title:"删除代码位分组",content:"你确定要删除"+o.join(","),onOk:function(){t.deleteCodeGroupData(a.join(","))}})},deleteBox:function(e){var t=this;console.log(e);var o=e.map(function(e,t){return e.codeName}),a=e.map(function(e,t){return e.fxAdCodeId});this.$Modal.confirm({title:"删除代码位",content:"你确定要删除"+o.join(","),onOk:function(){t.deleteCodeData(a.join(",")),console.log(a.join(","))}})},stopBox:function(e){var t=this,o=e.map(function(e,t){return e.codeName}),a=e.map(function(e,t){return e.fxAdCodeId});this.$Modal.confirm({title:"暂停广告投放",content:"你确定要暂停"+o.join(","),onOk:function(){t.stopCodeData(a.join(","))}})},stopCodeData:function(e){var t=this,o="/code/stopCode.json?codeId="+e;this.$Http.get(o,{}).then(function(e){0==e.body.status&&(t.$Message.info(e.body.data),t.recoverFilterData())})},recoverFilterData:function(){this.isStop=!0,this.isAdds=!0,this.isDeletes=!0,this.addCodeParams=[],this.deleteCodeParams=[],this.useCodeParams=[],this.getCodeList()},deleteCodeGroupData:function(e){var t=this,o="/codeGroup/deleteCodeGroup.json?codeGroupId="+e;this.$Http.get(o,{}).then(function(e){console.log(e),0==e.body.status&&(t.$Message.info(e.body.data),t.isGroupDalete=!0,t.codeGroupList())})},deleteCodeData:function(e){var t=this,o="/code/deleteCode.json?codeId="+e;console.log(e),this.$Http.get(o,{}).then(function(e){console.log(e),0==e.body.status&&(t.$Message.info(e.body.data),t.recoverFilterData())})},addcodeData:function(e){var t=this,o="/code/startCode.json?codeId="+e;this.$Http.get(o,{}).then(function(e){0==e.body.status&&(t.$Message.info(e.body.data),t.recoverFilterData())})},sx:function(){this.showBol2=!this.showBol2,this.showBol2?this.sxIcon="chevron-up":this.sxIcon="chevron-down"},sxData:function(){this.loading=!0,this.loadingGroup=!0,this.getCodeList(),this.codeGroupList()},getCodeGroup:function(){var e=this;this.$Http.get("/common/getCodeGroupStageList.json?",{}).then(function(t){if(e.codeGroup=[],0===t.body.status){console.log(t);for(var o=t.body.data.resourceList,a={},s={},i=0;i<o.length;i++){if(a={value:o[i].id,label:o[i].name},o[i].childList.length>0){a.children=[];for(var n=0;n<o[i].childList.length;n++)s={value:o[i].childList[n].id,label:o[i].childList[n].name},a.children.push(s)}e.codeGroup.push(a)}console.log(e.codeGroup)}})},changeOption:function(e){this.loading=!0,this.loadingGroup=!0,2===e.length?this.codeGroupId=e[1]:1===e.length?this.codeGroupId=e[0]:0===e.length&&(this.codeGroupId=""),this.codeGroupList(),this.getCodeList()},search:function(){this.loading=!0,this.pageSize=10,this.pageNo=1,this.data1=[],this.getCodeList()},searchGroup:function(){this.loadingGroup=!0,this.pageSizeGroup=10,this.pageNoGroup=1,this.dataGroup=[],this.codeGroupList()},handleCancel:function(){this.nameLike="",this.data1=[],this.getCodeList()},handleCancel2:function(){this.nameLikeGroup="",this.dataGroup=[],this.codeGroupList()},clickPage:function(e){console.log(e),this.loading=!0,this.pageNo=e,this.data1=[],this.getCodeList()},changePageSizeCode:function(e){console.log(e),this.pageNo=1,this.pageSize=e,this.loading=!0,this.data1=[],this.getCodeList()},changePageSizeGroup:function(e){console.log(e),this.pageNoGroup=1,this.pageSizeGroup=e,this.loading=!0,this.data1=[],this.codeGroupList()},clickPageGroup:function(e){console.log(e),this.loadingGroup=!0,this.pageNoGroup=e,this.data1=[],this.codeGroupList()},getCodeList:function(){var e=this,t="/code/getCodeList.json?nameLike="+encodeURIComponent(this.nameLike)+"&status="+this.status+"&isNative="+this.isNative+"&useStatus="+this.useStatus+"&pageSize="+this.pageSize+"&pageNo="+this.pageNo+"&codeSize="+this.codeSize+"&codeGroupId="+this.codeGroupId;this.$Http.get(t,{}).then(function(t){if(0==t.body.status){e.loading=!1,e.data1=[],console.log(t),e.loading=!1,e.totalCount=t.body.data.totalCount;for(var o="",a="",s=0;s<t.body.data.result.length;s++){var i=t.body.data.result;0==i[s].codeStatus?a="删除":1==i[s].codeStatus?a="启用":2==i[s].codeStatus&&(a="停用"),o={codeName:i[s].codeName,type2:i[s].statues,size:i[s].width+"*"+i[s].height,type:0==i[s].isNative?"非原生":"原生",update:i[s].updateTime,use:i[s].deliveringCount,codeStatusstr:a,codeStatus:i[s].codeStatus,isNative:i[s].isNative,fxAdCodeId:i[s].fxAdCodeId,fxAdCodeGroupId:i[s].fxAdCodeGroupId,deliverIds:i[s].deliverIds},e.data1.push(o)}}})},codeGroupList:function(){var e=this,t="/codeGroup/getCodeGroupList.json?nameLike="+encodeURIComponent(this.nameLikeGroup)+"&pageSize="+this.pageSizeGroup+"&pageNo="+this.pageNoGroup+"&codeGroupId="+this.codeGroupId;this.$Http.get(t,{}).then(function(t){e.dataGroup=[],console.log(t),e.loadingGroup=!1,e.totalCountGroup=t.body.data.totalCount;for(var o="",a=0;a<t.body.data.result.length;a++){var s=t.body.data.result;o={codeName:s[a].codeGroupName,type:0==s[a].isNative?"非原生":"原生",type2:2==s[a].codeGroupType?"频道":"站点",update:s[a].updateTime,fxAdCodeGroupId:s[a].fxAdCodeGroupId,codeGroupStatus:s[a].codeGroupStatus},e.dataGroup.push(o)}console.log(e.dataGroup)})},getTemplateCodeMang:function(){this.$refs.setNewCodeMang.beforeLoad(),this.$refs.setNewCodeMang.getCodeGroup()},getTemplateCodeGroup:function(){this.$refs.setNewCodeGroup.beforeLoad()},filterParentCodeGroup:function(){this.codeGroupList(),this.getCodeGroup(),this.$refs.setNewCodeMang.getCodeGroup()},filterParentCode:function(){this.getCodeList(),this.getCodeGroup()}}},P={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("top-title",{attrs:{title:"代码位管理"}}),e._v(" "),o("div",{staticClass:"child-wrap"},[o("div",{staticClass:"form-full"},[o("div",[o("span",[e._v("代码位分组：")]),e._v(" "),o("div",{staticClass:"main-element"},[o("el-cascader",{staticStyle:{width:"200px"},attrs:{options:e.codeGroup,"change-on-select":"",filterable:"",clearable:""},on:{change:e.changeOption},model:{value:e.selectedOptions,callback:function(t){e.selectedOptions=t},expression:"selectedOptions"}})],1)])]),e._v(" "),o("div",[o("Tabs",{attrs:{animated:!1}},[o("TabPane",{attrs:{label:"代码位管理"}},[o("div",{staticClass:"topBtnWrap"},[o("div",{staticClass:"topBtn"},[o("Button",{staticClass:"btnColor",attrs:{icon:"plus",type:"primary"},on:{click:e.getTemplateCodeMang}},[e._v("新建代码位")]),e._v(" "),o("Button",{staticClass:"btnSuspend",attrs:{type:"primary",disabled:e.isStop},on:{click:e.stopAll}},[e._v("停用")]),e._v(" "),o("Button",{staticClass:"btnCancel",attrs:{type:"error",disabled:e.isDeletes},on:{click:e.deleteAll}},[e._v("删除")]),e._v(" "),o("Button",{staticClass:"btnStart",attrs:{type:"success",disabled:e.isAdds},on:{click:e.addAll}},[e._v("启用")]),e._v(" "),o("Button",{attrs:{type:"ghost",icon:e.sxIcon},on:{click:e.sx}},[e._v("筛选")])],1),e._v(" "),o("div",{staticClass:"topBtn"},[o("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入代码位名称"},model:{value:e.nameLike,callback:function(t){e.nameLike=t},expression:"nameLike"}}),e._v(" "),o("Button",{staticClass:"btnColor",attrs:{type:"primary",icon:"search"},on:{click:e.search}},[e._v("搜索")])],1)]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.showBol2,expression:"showBol2"}]},[o("ul",{staticClass:"select-wrap"},[o("li",{staticClass:"child-li"},[o("div",{staticClass:"child-div"},[o("span",{staticClass:"label-left"},[e._v("载体类型：")]),e._v(" "),o("Select",{staticStyle:{width:"200px"},on:{"on-change":e.sxData},model:{value:e.isNative,callback:function(t){e.isNative=t},expression:"isNative"}},[o("Option",{attrs:{value:"-99"}},[e._v("全部")]),e._v(" "),o("Option",{attrs:{value:"1"}},[e._v("原生")]),e._v(" "),o("Option",{attrs:{value:"0"}},[e._v("非原生")])],1)],1),e._v(" "),o("div",{staticClass:"child-div"},[o("span",{staticClass:"label-left"},[e._v("状态：")]),e._v(" "),o("Select",{staticStyle:{width:"200px"},on:{"on-change":e.sxData},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},[o("Option",{attrs:{value:"-99"}},[e._v("全部")]),e._v(" "),o("Option",{attrs:{value:"1"}},[e._v("启用")]),e._v(" "),o("Option",{attrs:{value:"2"}},[e._v("停用")]),e._v(" "),o("Option",{attrs:{value:"0"}},[e._v("删除")])],1)],1),e._v(" "),o("div",{staticClass:"child-div"},[o("span",{staticClass:"label-left"},[e._v("使用情况：")]),e._v(" "),o("Select",{staticStyle:{width:"200px"},on:{"on-change":e.sxData},model:{value:e.useStatus,callback:function(t){e.useStatus=t},expression:"useStatus"}},[o("Option",{attrs:{value:"-99"}},[e._v("全部")]),e._v(" "),o("Option",{attrs:{value:"1"}},[e._v("有投放")]),e._v(" "),o("Option",{attrs:{value:"2"}},[e._v("无投放")]),e._v(" "),o("Option",{attrs:{value:"3"}},[e._v("三天内即将空闲")])],1)],1)])])]),e._v(" "),o("Table",{ref:"selection",staticClass:"table",attrs:{loading:e.loading,border:"",columns:e.columns,data:e.data1},on:{"on-selection-change":e.selectData}}),e._v(" "),o("Page",{attrs:{current:e.pageNo,total:e.totalCount,"show-sizer":"","show-total":""},on:{"on-change":e.clickPage,"on-page-size-change":e.changePageSizeCode}})],1),e._v(" "),o("TabPane",{attrs:{label:"代码位分组管理"}},[o("div",{staticClass:"topBtnWrap"},[o("div",{staticClass:"topBtn"},[o("Button",{staticClass:"btnColor",attrs:{icon:"plus",type:"primary"},on:{click:e.getTemplateCodeGroup}},[e._v("新建代码位分组")]),e._v(" "),o("Button",{staticClass:"btnCancel",attrs:{type:"error",disabled:e.isGroupDalete},on:{click:e.deleteGroupAll}},[e._v("删除")])],1),e._v(" "),o("div",[o("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入代码位分组名称"},model:{value:e.nameLikeGroup,callback:function(t){e.nameLikeGroup=t},expression:"nameLikeGroup"}}),e._v(" "),o("Button",{staticClass:"btnColor",attrs:{type:"primary",icon:"search"},on:{click:e.searchGroup}},[e._v("搜索")])],1)]),e._v(" "),o("Table",{ref:"selection",staticClass:"table",attrs:{loading:e.loadingGroup,border:"",columns:e.columnsGroup,data:e.dataGroup},on:{"on-selection-change":e.selectGroupData}}),e._v(" "),o("Page",{attrs:{current:e.pageNoGroup,total:e.totalCountGroup,"show-sizer":"","show-total":""},on:{"on-change":e.clickPageGroup,"on-page-size-change":e.changePageSizeGroup}})],1)],1)],1)]),e._v(" "),o("setNew-codeMang",{ref:"setNewCodeMang",on:{filterParent:e.getCodeList}}),e._v(" "),o("setNew-codeGroup",{ref:"setNewCodeGroup",on:{filterParent:e.filterParentCodeGroup}}),e._v(" "),o("updata-Code",{ref:"updataCode",on:{filterParent:e.getCodeList}}),e._v(" "),o("see-code",{ref:"seeCode"}),e._v(" "),o("useAd-States",{ref:"useAdStates",attrs:{adUses:e.adUseStates},on:{filterParent:e.getCodeList}}),e._v(" "),o("updata-CodeGroup",{ref:"updataCodeGroup",on:{filterParent:e.filterParentCodeGroup}}),e._v(" "),o("report",{ref:"report"})],1)},staticRenderFns:[]};var R=o("vSla")(B,P,!1,function(e){o("UGTA")},"data-v-fe5f15ae",null);t.default=R.exports},Mkjg:function(e,t){},"Q/Gc":function(e,t){},RcYr:function(e,t){},UGTA:function(e,t){},mgOT:function(e,t){}});
//# sourceMappingURL=3.48b80eb0f5770c4292e8.js.map