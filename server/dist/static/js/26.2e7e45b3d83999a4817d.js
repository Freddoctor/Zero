webpackJsonp([26],{Mtfb:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=t("a3Yh"),o={data:function(){return{modal:!1,level:1,sysResourceName:"",parentId:"",btndRadio:1,soltNameLen:"最多可输入100个字符",soltNameLenUrl:"请输入URL",permissionUrl:"",isAtive:!1,resourceLevel:[],ishow1:!0,ishow2:!1,ishow3:!1,isUrlAtive:!1,resourceListFirst:[],resourceListSecond:[],sysResourceId:""}},created:function(){this.getAdResourceLevel(),this.SelectGroupFirst(),this.SelectGroupSecond()},mounted:function(){},methods:t.n(i)()({beforeLoad:function(e){this.btndRadio="",this.parentId="",this.sysResourceName="",this.permissionUrl="",this.soltNameLen="最多可输入100个字符",this.isAtive=!1,this.soltNameLenUrl="请输入URL",this.isUrlAtive=!1,this.modal=!0,this.clickRadio(e)},cancel:function(){this.soltNameLen="最多可输入100个字符",this.isAtive=!1,this.soltNameLenUrl="请输入URL",this.isUrlAtive=!1,this.modal=!1},userDataNum:function(){if(this.sysResourceName){null==this.sysResourceName.match(/^[\s\S]{1,100}$/)&&(this.soltNameLen="长度超过一百个字符",this.isAtive=!0)}else this.soltNameLen="权限功能名称不能为空",this.isAtive=!0},onFocusName:function(){this.soltNameLen="最多可输入100个字符",this.isAtive=!1},getAdResourceLevel:function(){var e=this;this.$Http.post("/common/getAdResourceLevelMap.json?level=2",{}).then(function(s){console.log(s),e.resourceLevel=s.body.data.list})},urlBlur:function(){""==this.permissionUrl?(this.soltNameLenUrl="URL不能为空",this.isUrlAtive=!0):(this.soltNameLenUrl="请输入URL",this.isUrlAtive=!1)},clickRadio:function(e){console.log(e),this.level=e,1===e?(this.ishow1=!0,this.ishow2=!1,this.ishow3=!1):2===e?(this.ishow1=!1,this.ishow2=!0,this.ishow3=!1):3===e&&(this.ishow1=!1,this.ishow2=!1,this.ishow3=!0)},SelectGroupFirst:function(){var e=this;this.$Http.get("/common/getResourceListByLevel.json?level=1&parentId",{}).then(function(s){console.log(s.body.data.resourceList),e.resourceListFirst=s.body.data.resourceList})},SelectGroupSecond:function(){var e=this;this.$Http.get("/common/getResourceList.json?level=2&nameLike=",{}).then(function(s){console.log(s.body.data.resourceList),e.resourceListSecond=s.body.data.resourceList})},updateSysResource:function(){var e=this;if(""==this.permissionUrl)return this.isUrlAtive=!0,!1;var s="/user/updateSysResource.json?level="+this.level+"&permissionUrl="+this.permissionUrl+"&sysResourceName="+encodeURIComponent(this.sysResourceName)+"&parentId="+this.parentId+"&sysResourceId="+this.sysResourceId;this.$Http.get(s,{}).then(function(s){console.log(s),0===s.body.status&&(e.modal=!1,e.$emit("filterParent"))})},getSysResourceById:function(e){var s=this;this.sysResourceId=e;var t="/user/getSysResourceById.json?sysResourceId="+e;this.$Http.get(t,{}).then(function(e){0===e.body.status&&(console.log(e),s.level=e.body.data.level,s.parentId=e.body.data.parentId,s.sysResourceName=e.body.data.sysResourceName,s.permissionUrl=e.body.data.permissionUrl)})}},"urlBlur",function(){""==this.permissionUrl?(this.soltNameLenUrl="URL不能为空",this.isUrlAtive=!0):(this.soltNameLenUrl="请输入URL",this.isUrlAtive=!1)})},l={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"form-wrap"},[t("Modal",{staticStyle:{"{width":"100%}"},attrs:{title:"修改权限功能","class-name":"modal-box"},model:{value:e.modal,callback:function(s){e.modal=s},expression:"modal"}},[t("div",{staticClass:"fu"},[t("div",{staticClass:"RadioGroup-wrap"},[t("span",{staticClass:"label-left"},[e._v("级别类型")]),e._v(" "),e._l(e.resourceLevel,function(s,i){return t("RadioGroup",{key:i,on:{"on-change":e.clickRadio},model:{value:e.level,callback:function(s){e.level=s},expression:"level"}},[t("Radio",{attrs:{label:s.id}},[e._v(e._s(s.name))])],1)})],2),e._v(" "),t("ul",{staticClass:"content-page"},[t("li",{directives:[{name:"show",rawName:"v-show",value:e.ishow2,expression:"ishow2"}]},[t("div",{staticClass:"content-input"},[t("span",{staticClass:"label-left"},[e._v("所属一级分类：")]),e._v(" "),t("Select",{staticStyle:{width:"200px"},model:{value:e.parentId,callback:function(s){e.parentId=s},expression:"parentId"}},e._l(e.resourceListFirst,function(s,i){return t("Option",{key:s.id,attrs:{value:s.id}},[e._v(e._s(s.name))])}))],1)]),e._v(" "),t("li",{directives:[{name:"show",rawName:"v-show",value:e.ishow3,expression:"ishow3"}]},[t("div",{staticClass:"content-input"},[t("span",{staticClass:"label-left"},[e._v("所属二级分类：")]),e._v(" "),t("Select",{staticStyle:{width:"200px"},model:{value:e.parentId,callback:function(s){e.parentId=s},expression:"parentId"}},e._l(e.resourceListSecond,function(s,i){return t("OptionGroup",{key:i,attrs:{label:s.name}},e._l(s.childList,function(s){return t("Option",{key:s.id,attrs:{value:s.id}},[e._v(e._s(s.name)+"\n                ")])}))}))],1)]),e._v(" "),t("div",{staticClass:"content-input"},[t("span",{staticClass:"label-left"},[e._v("权限功能名称：")]),e._v(" "),t("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入权限功能名称"},on:{"on-blur":e.userDataNum},model:{value:e.sysResourceName,callback:function(s){e.sysResourceName=s},expression:"sysResourceName"}}),e._v(" "),t("span",{staticClass:"label-right",class:{"label-right-active":e.isAtive}},[e._v(e._s(e.soltNameLen))])],1),e._v(" "),t("div",{staticClass:"content-input"},[t("span",{staticClass:"label-left"},[e._v("URL：")]),e._v(" "),t("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入地址"},on:{"on-blur":e.urlBlur},model:{value:e.permissionUrl,callback:function(s){e.permissionUrl=s},expression:"permissionUrl"}}),e._v(" "),t("span",{staticClass:"label-right",class:{"label-right-active":e.isUrlAtive}},[e._v(e._s(e.soltNameLenUrl))])],1)])]),e._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{staticStyle:{"margin-right":"20px"},on:{click:function(s){e.modal=!1}}},[e._v("取消")]),e._v(" "),t("Button",{staticClass:"btnColor",attrs:{type:"primary"},on:{click:e.updateSysResource}},[e._v("修改并启用")])],1)])],1)},staticRenderFns:[]};var a=t("vSla")(o,l,!1,function(e){t("QLAo")},"data-v-0cd7658f",null);s.default=a.exports},QLAo:function(e,s){}});
//# sourceMappingURL=26.2e7e45b3d83999a4817d.js.map