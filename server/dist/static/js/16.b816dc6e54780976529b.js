webpackJsonp([16],{O5ui:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("HzJ8"),i=a.n(o),s=a("Ldyx"),r=a("5YEj"),n=a.n(r),d={components:{topTitle:s.a},data:function(){var t=this;return{adClickNum:"",adShowNum:"",adRate:"",startDay:"",endDay:"",dateRange:[],pageSize:10,pageNo:1,codePageSize:10,codePageNo:1,codeTotalPage:1,totalCount:0,dataClickNum:[],dataShowNum:[],dataAdDateDay:[],codeGroupId:"",searchName:"",codeGroupType:"",codeId:"",nameLike:"",modeType:1,isCode:!0,isCodeTable:!0,isCodeGroup:!1,isCodeGroupTable:!1,isAdd:!0,modelGroup:"全部",changeModel:"全部",textLoadMore:"加载更多",selectMode:"代码位报告",myChart:"",codeGroupArr:[],codeModel:"",codeArr:[],getCodeList:[],reportColumns:[{title:"代码位名称",key:"showName"},{title:"代码位ID",key:"showId"},{title:"展现量",key:"showNum",render:function(e,a){return e("span",t.splitNum(a.row.showNum))}},{title:"点击量",key:"clickNum",render:function(e,a){return e("span",t.splitNum(a.row.clickNum))}},{title:"点击率",key:"rate"}],codeGroupColumns:[{title:"代码位分组名称",key:"showName"},{title:"代码位分组类型",key:"showGroupName"},{title:"展现量",key:"showNum",render:function(e,a){return e("span",t.splitNum(a.row.showNum))}},{title:"点击量",key:"clickNum",render:function(e,a){return e("span",t.splitNum(a.row.clickNum))}},{title:"点击率",key:"rate"}],adReportList:[]}},created:function(){},mounted:function(){this.startDay=this.getPreDate(-7),this.endDay=this.getPreDate(-1),this.dateRange=[this.startDay,this.endDay],this.myChart=n.a.init(document.getElementById("main")),this.getCodeListFun(),this.getCodeGroupStageList(),this.selectReport()},methods:{initEcharts:function(){var t={title:{text:""},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},color:["#044b7c","#ea1107"],xAxis:{type:"category",boundaryGap:!1,data:this.dataAdDateDay},yAxis:[{name:"展现量",type:"value"},{name:"点击量",type:"value"}],minInterval:1,series:[{name:"展现量",data:this.dataShowNum,type:"line",areaStyle:{color:"#d6eaff"},lineStyle:{color:"#044b7c"}},{name:"点击量",data:this.dataClickNum,yAxisIndex:1,type:"line",areaStyle:{color:"#ffd6e1"},lineStyle:{color:"#ea1107"}}]};this.myChart.setOption(t)},splitNum:function(t){var e=/(\d)(?=(?:\d{3})+$)/g,a=(t+"").split(".");return 2==a.length?a[0].replace(e,"$1,")+"."+a[1]:a[0].replace(e,"$1,")},getCodeReportList:function(){var t=this,e="/report/getCodeReportList.json?startDay="+this.startDay+"&endDay="+this.endDay+"&pageSize="+this.pageSize+"&pageNo="+this.pageNo+"&codeId="+this.codeId+"&nameLike="+encodeURIComponent(this.nameLike)+"&codeGroupId="+this.codeGroupId;this.$Http.get(e,{}).then(function(e){if(0==e.body.status){t.adReportList=[];var a=e.body.data.result;t.totalCount=e.body.data.totalCount,a.forEach(function(e,a){t.adReportList.push(e)})}})},getCodeReportChart:function(){var t=this,e="/report/getCodeReportChart.json?startDay="+this.startDay+"&endDay="+this.endDay+"&codeId="+this.codeId+"&nameLike="+encodeURIComponent(this.nameLike)+"&codeGroupId="+this.codeGroupId;this.$Http.get(e,{}).then(function(e){if(0==e.body.status){t.dataAdDateDay=[],t.dataClickNum=[],t.dataShowNum=[];var a=[],o=[];e.body.data.result.forEach(function(e,i){a.push(e.clickNum),o.push(e.showNum),t.dataAdDateDay.push(e.adDateDay)}),t.dataClickNum=a,t.dataShowNum=o,t.myChart.clear(),t.initEcharts()}})},getCodeGroupReportList:function(){var t=this,e="/report/getCodeGroupReportList.json?startDay="+this.startDay+"&endDay="+this.endDay+"&pageSize="+this.pageSize+"&pageNo="+this.pageNo+"&codeGroupType="+this.codeGroupType+"&codeGroupId="+this.codeGroupId+"&nameLike="+encodeURIComponent(this.nameLike);this.$Http.get(e,{}).then(function(e){if(0==e.body.status){t.adReportList=[];var a=e.body.data.result;t.totalCount=e.body.data.totalCount,a.forEach(function(e,a){var o={showNum:e.showNum,clickNum:e.clickNum,rate:e.rate,showName:e.showName,adDateDay:e.adDateDay,showGroupName:1==e.codeGroupType?"站点":"频道"};t.adReportList.push(o)})}})},getCodeGroupReportChart:function(){var t=this,e="/report/getCodeGroupReportChart.json?startDay="+this.startDay+"&endDay="+this.endDay+"&codeGroupType="+this.codeGroupType+"&codeGroupId="+this.codeGroupId+"&nameLike="+encodeURIComponent(this.nameLike);this.$Http.get(e,{}).then(function(e){if(0==e.body.status){t.dataAdDateDay=[],t.dataClickNum=[],t.dataShowNum=[];var a=[],o=[];e.body.data.result.forEach(function(e,i){a.push(e.clickNum),o.push(e.showNum),t.dataAdDateDay.push(e.adDateDay)}),t.dataClickNum=a,t.dataShowNum=o,t.myChart.clear(),t.initEcharts()}})},loadMore:function(){0!=this.getCodeList.length&&(this.codePageNo!=this.codeTotalPage?(this.codePageNo++,this.getCodeListFun()):this.textLoadMore="已到最底部")},getPreDate:function(t){var e=new Date;return e.setDate(e.getDate()+t),e.Format("yyyy-MM-dd")},selectReport:function(){if(""==this.startDay)return this.$Message.error("开始时间不能为空"),!1;1==this.modeType?(this.getCodeReportChart(),this.getCodeReportList()):(this.getCodeGroupReportChart(),this.getCodeGroupReportList())},selectReportList:function(){1==this.modeType?this.getCodeReportList():this.getCodeGroupReportList()},changePageNo:function(t){this.pageNo=t,this.selectReportList()},changePageSize:function(t){this.pageNo=1,this.pageSize=t,this.selectReportList()},getFilterData:function(){console.log(this.nameLike),this.pageSize=10,this.pageNo=1,this.selectReport()},confrimDownLoad:function(){var t=sessionStorage.getItem("token");1==this.modeType?window.location.href=this.ApiUrl+"/report/downloadCodeReport.json?startDay="+this.startDay+"&endDay="+this.endDay+"&codeId="+this.codeId+"&nameLike="+encodeURIComponent(this.nameLike)+"&codeGroupId="+this.codeGroupId+"&t="+t:window.location.href=this.ApiUrl+"/report/downloadCodeGroupReport.json?startDay="+this.startDay+"&endDay="+this.endDay+"&codeGroupType="+this.codeGroupType+"&codeGroupId="+this.codeGroupId+"&nameLike="+encodeURIComponent(this.nameLike)+"&t="+t},getCodeListFun:function(){var t=this,e="/code/getCodeList.json?nameLike=&status&isNative&useStatus=&pageSize="+this.codePageSize+"&pageNo="+this.codePageNo;this.$Http.get(e,{}).then(function(e){if(console.log(e),0==e.body.status){t.codeArr=[];for(var a=0;a<e.body.data.result.length;a++)t.getCodeList.push(e.body.data.result[a]),t.codeArr.push(e.body.data.result[a]);t.codeTotalPage=e.body.data.totalPages}})},getCodeGroupStageList:function(){var t=this;this.$Http.get("/common/getCodeGroupStageList.json?",{}).then(function(e){if(console.log(e),0==e.body.status){var a=e.body.data.resourceList,o=!0,s=!1,r=void 0;try{for(var n,d=i()(a);!(o=(n=d.next()).done);o=!0){var l=n.value,c={value:l.id,label:l.name,children:[]},p=!0,h=!1,u=void 0;try{for(var g,y=i()(l.childList);!(p=(g=y.next()).done);p=!0){var m=g.value,v={value:m.id,label:m.name};c.children.push(v)}}catch(t){h=!0,u=t}finally{try{!p&&y.return&&y.return()}finally{if(h)throw u}}t.codeGroupArr.push(c)}}catch(t){s=!0,r=t}finally{try{!o&&d.return&&d.return()}finally{if(s)throw r}}}})},getCodeByCodeGroup:function(){var t=this,e="/common/getCodeByCodeGroup.json?codeGroupId="+this.codeGroupId;this.$Http.get(e,{}).then(function(e){if(console.log(e),0==e.body.status){var a=e.body.data.resourceList;t.getCodeList=[];var o=!0,s=!1,r=void 0;try{for(var n,d=i()(a);!(o=(n=d.next()).done);o=!0){var l=n.value,c={fxAdCodeId:l.id,codeName:l.name};t.getCodeList.push(c)}}catch(t){s=!0,r=t}finally{try{!o&&d.return&&d.return()}finally{if(s)throw r}}t.isAdd=!1,t.codeTotalPage=e.body.data.totalPages}})},changeCodeGroup:function(t){if(console.log(t),2==t.length)this.codeGroupId=t[1],this.getCodeByCodeGroup();else if(1==t.length)this.codeGroupId=t[0];else{this.codeGroupId="",this.getCodeList=[],this.isAdd=!0;for(var e=0;e<this.codeArr.length;e++)this.getCodeList.push(this.codeArr[e])}this.pageNo=1,this.selectReport()},changeCodeGroup2:function(t){2==t.length?this.codeGroupId=t[1]:1==t.length?this.codeGroupId=t[0]:this.codeGroupId="",this.pageNo=1,this.selectReport()},changeCode:function(t){this.codeId=-99==t?"":t,this.pageNo=1,this.selectReport()},changeChanel:function(t){this.codeGroupType=-99==t?"":t,this.pageNo=1,this.selectReport()},changeReport:function(t){console.log(t),"代码位报告"==t?(this.modeType=1,this.isCode=!0,this.isCodeTable=!0,this.isCodeGroup=!1,this.isCodeGroupTable=!1):(this.modeType=2,this.isCode=!1,this.isCodeTable=!1,this.isCodeGroup=!0,this.isCodeGroupTable=!0),console.log(this.modeType),this.nameLike="",this.codeGroupType="",this.codeId="",this.codeGroupId="",this.pageNo=1,this.selectReport()},startTime:function(t){if(t.length<2||""==t[0]||""==t[1])return this.$Message.error("请选择日期范围"),!1;this.startDay=t[0],this.endDay=t[1],this.pageNo=1,this.selectReport()}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"topTitle-wrap"},[t._m(0),t._v(" "),a("div",{staticStyle:{"margin-right":"20px"}},[a("ul",{staticClass:"myDatePicker",attrs:{slot:"mySolt"},slot:"mySolt"},[a("li",{staticClass:"myDatePicker_li"},[a("span",[t._v("日期范围")]),t._v(" "),a("DatePicker",{staticStyle:{width:"200px"},attrs:{value:t.dateRange,type:"daterange",placeholder:"",placement:"bottom-end",clearable:!1,editable:!1},on:{"on-change":t.startTime}})],1),t._v(" "),a("li",{staticClass:"myDatePicker_li"},[a("Button",{staticClass:"btnColor",attrs:{type:"primary",icon:"archive"},on:{click:t.confrimDownLoad}},[t._v("下载报告")])],1)])])]),t._v(" "),a("RadioGroup",{staticStyle:{margin:"20px"},attrs:{type:"button",size:"large"},on:{"on-change":t.changeReport},model:{value:t.selectMode,callback:function(e){t.selectMode=e},expression:"selectMode"}},[a("Radio",{attrs:{label:"代码位报告"}}),t._v(" "),a("Radio",{attrs:{label:"代码位分组报告"}})],1),t._v(" "),a("div",{staticClass:"reportContent"},[a("div",{attrs:{id:"main"}}),t._v(" "),t._m(1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isCode,expression:"isCode"}],staticClass:"searchReport"},[a("div",{staticStyle:{display:"flex",margin:"5px"}},[t._m(2),t._v(" "),a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("span",{staticStyle:{"font-size":"14px","margin-left":"20px","vertical-align":"middle"}},[t._v("代码位分组:")]),t._v(" "),a("Cascader",{staticStyle:{display:"inline-block",width:"200px"},attrs:{data:t.codeGroupArr,"change-on-select":""},on:{"on-change":t.changeCodeGroup}})],1),t._v(" "),a("div",{staticClass:"l"},[a("span",{staticStyle:{"font-size":"14px","margin-left":"20px","vertical-align":"middle"}},[t._v("代码位:")]),t._v(" "),a("Select",{staticStyle:{width:"200px"},attrs:{filterable:""},on:{"on-change":t.changeCode},model:{value:t.codeModel,callback:function(e){t.codeModel=e},expression:"codeModel"}},[a("Option",{attrs:{value:"-99",label:"全部"}}),t._v(" "),a("div",[a("span",{staticClass:"orderId fu"},[t._v("ID号")]),t._v(" "),a("span",{staticClass:"orderName fu"},[t._v("代码位名称")])]),t._v(" "),t._l(t.getCodeList,function(e){return a("Option",{key:e.fxAdCodeId,attrs:{value:e.fxAdCodeId}},[a("span",{staticClass:"orderId"},[t._v(t._s(e.fxAdCodeId))]),t._v(" "),a("span",{staticClass:"orderName"},[t._v(t._s(e.codeName))])])}),t._v(" "),a("Button",{directives:[{name:"show",rawName:"v-show",value:t.isAdd,expression:"isAdd"}],attrs:{type:"text",long:""},on:{click:t.loadMore}},[t._v(t._s(t.textLoadMore))])],2)],1)]),t._v(" "),a("div",{staticStyle:{"align-self":"center","margin-right":"10px"}},[a("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入代码位名称"},model:{value:t.nameLike,callback:function(e){t.nameLike=e},expression:"nameLike"}}),t._v(" "),a("Button",{staticClass:"btnColor",attrs:{type:"primary",icon:"search"},on:{click:t.getFilterData}},[t._v("搜索")])],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isCodeGroup,expression:"isCodeGroup"}],staticClass:"searchReport"},[a("div",{staticStyle:{display:"flex",margin:"5px"}},[t._m(3),t._v(" "),a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("span",{staticStyle:{"font-size":"14px","margin-left":"20px","vertical-align":"middle"}},[t._v("代码位分组类型:")]),t._v(" "),a("Select",{staticStyle:{width:"150px"},on:{"on-change":t.changeChanel},model:{value:t.changeModel,callback:function(e){t.changeModel=e},expression:"changeModel"}},[a("Option",{attrs:{value:"-99",label:"全部"}}),t._v(" "),a("Option",{attrs:{value:"1",label:"站点"}}),t._v(" "),a("Option",{attrs:{value:"2",label:"频道"}})],1)],1),t._v(" "),a("div",[a("span",{staticStyle:{"font-size":"14px","margin-left":"20px","vertical-align":"middle"}},[t._v("代码位分组:")]),t._v(" "),a("Cascader",{staticStyle:{display:"inline-block",width:"200px","margin-left":"10px"},attrs:{data:t.codeGroupArr,"change-on-select":""},on:{"on-change":t.changeCodeGroup2}})],1)]),t._v(" "),a("div",{staticStyle:{"align-self":"center","margin-right":"10px"}},[a("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入代码位名称"},model:{value:t.nameLike,callback:function(e){t.nameLike=e},expression:"nameLike"}}),t._v(" "),a("Button",{staticClass:"btnColor",attrs:{type:"primary",icon:"search"},on:{click:t.getFilterData}},[t._v("搜索")])],1)]),t._v(" "),a("Table",{directives:[{name:"show",rawName:"v-show",value:t.isCodeTable,expression:"isCodeTable"}],attrs:{border:"",columns:t.reportColumns,data:t.adReportList}}),t._v(" "),a("Table",{directives:[{name:"show",rawName:"v-show",value:t.isCodeGroupTable,expression:"isCodeGroupTable"}],attrs:{border:"",columns:t.codeGroupColumns,data:t.adReportList}}),t._v(" "),a("Page",{attrs:{total:t.totalCount,current:t.pageNo,"show-sizer":"","show-total":""},on:{"on-change":t.changePageNo,"on-page-size-change":t.changePageSize}})],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",{staticClass:"tpTitle"},[this._v("资源报告")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"ract-wrap"},[e("div",[e("span",{staticClass:"showRact"}),this._v(" "),e("span",[this._v("展现量")])]),this._v(" "),e("div",{staticClass:"ract-wrap"},[e("span",{staticClass:"clickRact"}),this._v(" "),e("span",[this._v("点击量")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{display:"flex","align-items":"center"}},[e("span",{staticStyle:{"font-size":"14px","margin-left":"20px"}},[this._v("筛选")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{display:"flex","align-items":"center"}},[e("span",{staticStyle:{"font-size":"14px","margin-left":"20px","vertical-align":"middle"}},[this._v(" 筛选")])])}]};var c=a("vSla")(d,l,!1,function(t){a("sdBS")},"data-v-754b6884",null);e.default=c.exports},sdBS:function(t,e){}});
//# sourceMappingURL=16.b816dc6e54780976529b.js.map