webpackJsonp([5,18,28],{PDg1:function(t,e){},WFCQ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("a3Yh"),i=a.n(l),s=a("Ldyx"),o=a("yP8O"),n=a("mGjh"),r={data:function(){return{modal:!1,name:"",soltNameLen:"最多可输入100个字符",isAtive:!1,materialTemplateId:"",valueTextarea:"",materialName:"",templateName:"",templateCodeArea:"",materialTemplateName:"",materialTemplateCode:"",templateDesc:"",code:"",desc:""}},created:function(){},methods:{beforeLoad:function(){this.templateName="",this.code="",this.desc="",this.modal=!0},getMaterialTemplateById:function(t){var e=this,a="/materialTemplate/getMaterialTemplateById.json?materialTemplateId="+t;this.$Http.get(a,{}).then(function(t){if(0==t.body.status){console.log(t.body.data);var a=t.body.data;e.templateName=a.materialTemplateName,e.desc=a.materialTemplateDesc,e.code=a.materialTemplateCode}})}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Modal",{attrs:{title:"查看物料模板",styles:{width:"100%"},"class-name":"modal-box"},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("div",{staticClass:"master-content"},[a("div",{staticClass:"row"},[a("label",[t._v("物料模板名称：")]),t._v(" "),a("span",[t._v(t._s(t.templateName))])]),t._v(" "),a("div",{staticClass:"row"},[a("label",[t._v("代码：")]),t._v(" "),a("Input",{staticStyle:{width:"300px",height:"200px"},attrs:{type:"textarea",rows:8,disabled:"",placeholder:"请输入模板代码"},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}})],1),t._v(" "),a("div",{staticClass:"row"},[a("label",[t._v("说明：")]),t._v(" "),a("Input",{staticStyle:{width:"300px",height:"200px"},attrs:{type:"textarea",rows:8,disabled:"",placeholder:"暂无说明"},model:{value:t.desc,callback:function(e){t.desc=e},expression:"desc"}})],1)]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{staticClass:"btnColor",attrs:{type:"text"},on:{click:function(e){t.modal=!1}}},[t._v("返回")])],1)])],1)},staticRenderFns:[]};var m=a("vSla")(r,c,!1,function(t){a("l5fu")},"data-v-42abcf9e",null).exports,d={components:{topTitle:s.a,materialTemlate:o.default,changeMaterial:n.default,showMaterial:m},data:function(){var t,e=this;return t={isDeletes:!0,data1:[],value:"",loading:!0,fxAdMaterialTemplateId:"",status:"-99",routeParams:"",pageSize:10,pageNo:1,modal1:!1,isShow:!1,bolOk:null,paramsIndex:""},i()(t,"fxAdMaterialTemplateId",""),i()(t,"totalCount",0),i()(t,"isAdds",!0),i()(t,"isDeletes",!0),i()(t,"addMaterialTemplateParams",[]),i()(t,"deleteMaterialTemplateParams",[]),i()(t,"columns",[{type:"selection",width:60,align:"center"},{title:"物料模板名称",key:"materialTemplateName"},{title:"状态",key:"status"},{title:"说明",key:"explain"},{title:"物料数",key:"materialNum"},{title:"操作",align:"center",key:"operate",width:200,render:function(t,a){return t("div",0===a.row.materialTemplateStatus?[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px",backgroundColor:"#0676c4",borderColor:"#0676c4"},on:{click:function(){e.$refs.showMaterial.beforeLoad(),e.$refs.showMaterial.getMaterialTemplateById(a.row.fxAdMaterialTemplateId)}}},"查看")]:[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px",backgroundColor:"#0676c4",borderColor:"#0676c4"},on:{click:function(){e.$refs.showMaterial.beforeLoad(),e.$refs.showMaterial.getMaterialTemplateById(a.row.fxAdMaterialTemplateId)}}},"查看"),t("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px",backgroundColor:"#1fa2fd",borderColor:"#1fa2fd"},on:{click:function(){e.$refs.changeMaterial.beforeLoad(),e.$refs.changeMaterial.getMaterialTemplateById(a.row.fxAdMaterialTemplateId)}}},"修改"),t("Button",{props:{type:"error",size:"small"},style:{backgroundColor:"#ea0b00",borderColor:"#ea0b00"},on:{click:function(){var t=[];t.push(a.row),e.deleteBox(t)}}},"删除")])}}]),t},created:function(){this.initList()},methods:{selectData:function(t){console.log(t);var e=t.filter(function(t){return 1==t.materialTemplateStatus}),a=t.filter(function(t){return 0==t.materialTemplateStatus});console.log(a),this.isAdds=!a.length>0,this.addMaterialTemplateParams=a,this.isDeletes=!e.length>0,this.deleteMaterialTemplateParams=e},trigger:function(){this.isShow=!this.isShow},deleteBox:function(t){var e=this;console.log(t);var a=t.map(function(t,e){return t.materialTemplateName}),l=t.map(function(t,e){return t.fxAdMaterialTemplateId});this.$Modal.confirm({title:"删除物料模版",content:"你确定要删除"+a.join(","),onOk:function(){e.deleteMaterialData(l.join(",")),console.log(l.join(","))}})},deleteMaterialData:function(t){var e=this,a="/materialTemplate/deleteMaterialTemplate.json?materialTemplateId="+t;console.log(t),this.$Http.get(a,{}).then(function(t){console.log(t),e.$Message.info(t.body.data),e.initList()})},deleteAll:function(){this.deleteBox(this.deleteMaterialTemplateParams)},selectStatus:function(t){this.status=t,this.initList()},initList:function(){var t=this,e=(sessionStorage.getItem("userName"),"/materialTemplate/getMaterialTemplateList.json?nameLike="+encodeURIComponent(this.value)+"&status="+this.status+"&pageSize="+this.pageSize+"&pageNo="+this.pageNo);this.$Http.get(e,{}).then(function(e){var a=e.body.data.result;t.loading=!1,t.totalCount=e.body.data.totalCount,console.log(e);var l=[];for(var i in t.data1=[],a){a[i].roles;l={materialTemplateName:a[i].materialTemplateName,materialTemplateStatus:a[i].materialTemplateStatus,status:0==a[i].materialTemplateStatus?"删除":"启用",explain:a[i].materialTemplateDesc,materialNum:a[i].materialCount,fxAdMaterialTemplateId:a[i].fxAdMaterialTemplateId},t.data1.push(l)}})},clickPage:function(t){console.log(t),this.loading=!0,this.pageNo=t,this.initList()},changePageSize:function(t){console.log(t),this.loading=!0,this.pageNo=1,this.pageSize=t,this.initList()},newMaterialTemlate:function(){this.$refs.materialTemlate.beforeLoad()},search:function(){this.pageNo=1,this.initList()},ok:function(){var t=this,e="/materialTemplate/deleteMaterialTemplate.json?materialTemplateId="+this.fxAdMaterialTemplateId;console.log(e),this.$Http.get(e,{}).then(function(e){console.log(e),0==e.body.status?(t.$Message.info(e.body.msg),t.data1.splice(t.paramsIndex,1)):200==e.body.status?(t.$router.push({name:"login"}),t.$Message.info(e.body.msg)):t.$Message.info(e.body.msg)})},cancel:function(){this.$Message.info("已取消删除")},selectAll:function(t){console.log(t);for(var e="",a=0;a<t.length;a++)a==t.length-1?e+=t[a].fxAdMaterialTemplateId:e+=t[a].fxAdMaterialTemplateId+",";this.fxAdMaterialTemplateId=e,console.log(e)},delateAll:function(){var t="/materialTemplate/deleteMaterialTemplate.json?materialTemplateId="+this.fxAdMaterialTemplateId;this.$Http.get(t,{}).then(function(t){console.log(t)})},getFilterData:function(){this.initList()}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("top-title",{attrs:{title:"物料模板管理"}}),t._v(" "),a("div",{staticClass:"fu"},[a("div",{staticClass:"topBtnWrap"},[a("div",[a("Button",{staticClass:"btnColor",attrs:{icon:"plus",type:"primary"},on:{click:t.newMaterialTemlate}},[t._v("新建物料模板")]),t._v(" "),a("Button",{staticClass:"btnCancel",attrs:{type:"error",disabled:t.isDeletes},on:{click:t.deleteAll}},[t._v("删除")]),t._v(" "),a("Button",{attrs:{type:"text"},on:{click:t.trigger}},[t._v("筛选  "),a("Icon",{attrs:{type:"arrow-down-b"}})],1)],1),t._v(" "),a("div",[a("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"输入关键字"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),t._v(" "),a("Button",{staticClass:"btnColor",attrs:{type:"primary",icon:"search"},on:{click:t.search}},[t._v("搜索")])],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"master-content-middle"},[a("div",{staticClass:"label"},[t._v("\n        状态：\n      ")]),t._v(" "),a("div",{staticClass:"label-value",attrs:{id:"filterForm"}},[a("Select",{staticStyle:{width:"200px"},on:{"on-change":t.selectStatus},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[a("Option",{attrs:{value:"-99"}},[t._v("全部")]),t._v(" "),a("Option",{attrs:{value:"1"}},[t._v("启用")]),t._v(" "),a("Option",{attrs:{value:"0"}},[t._v("删除")])],1)],1)]),t._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},[a("Table",{ref:"selection",attrs:{loading:t.loading,border:"",columns:t.columns,data:t.data1},on:{"on-select-all":function(t){},"on-selection-change":t.selectData}})],1),t._v(" "),a("Page",{attrs:{current:t.pageNo,total:t.totalCount,"show-sizer":"","show-total":""},on:{"on-change":t.clickPage,"on-page-size-change":t.changePageSize}}),t._v(" "),a("Modal",{attrs:{title:"删除用户？"},on:{"on-ok":t.ok,"on-cancel":t.cancel},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[a("p",[t._v("确定要删除此条内容吗？")])])],1),t._v(" "),a("materialTemlate",{ref:"materialTemlate",on:{filterParent:t.getFilterData}}),t._v(" "),a("changeMaterial",{ref:"changeMaterial",on:{filterParent:t.getFilterData}}),t._v(" "),a("showMaterial",{ref:"showMaterial",on:{filterParent:t.getFilterData}})],1)},staticRenderFns:[]};var u=a("vSla")(d,p,!1,function(t){a("PDg1")},"data-v-3ceea8e0",null);e.default=u.exports},l5fu:function(t,e){},mGjh:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l={data:function(){return{modal:!1,name:"",soltNameLen:"最多可输入100个字符",descString:'常用语法规则：(1)声明参数：var 参数名:数据类型=0或1; //参数含义说明数据类型包括media(图片或flash)、link(点击链接)、text(文本)、number(数值)0或1表示是否必填，0为选填，1为必填例如，var imglink:link=1;//图片点击链接(2)引用参数：${参数名};例如：<a href="${imglink}" target="_blank">...</a>',isAtive:!1,descString2:'常用语法规则：(1)声明参数：var 参数名:数据类型=0或1; //参数含义说明数据类型包括media(图片或flash)、link(点击链接)、text(文本)、number(数值)0或1表示是否必填，0为选填，1为必填例如，var imglink:link=1;//图片点击链接(2)引用参数：${参数名};例如：<a href="${imglink}" target="_blank">...</a>',isAtiveCf:!1,materialTemplateId:"",valueTextarea:"",materialName:"",templateName:"",templateCodeArea:"",materialTemplateName:"",materialTemplateCode:"",templateDesc:"",code:"",desc:""}},created:function(){},methods:{beforeLoad:function(){this.descString=this.descString2,this.isAtiveCf=!1,this.materialName="",this.code="",this.desc="",this.modal=!0},cancel:function(){this.descString=this.descString2,this.isAtiveCf=!1,this.soltNameLen="最多可输入100个字符",this.isAtive=!1,this.modal=!1},getMaterialTemplateById:function(t){var e=this,a="/materialTemplate/getMaterialTemplateById.json?materialTemplateId="+t;this.$Http.get(a,{}).then(function(t){if(0==t.body.status){console.log(t.body.data);var a=t.body.data;e.materialTemplateId=a.fxAdMaterialTemplateId,e.templateName=a.materialTemplateName,e.templateDesc=a.materialTemplateDesc,e.templateCodeArea=a.materialTemplateCode}})},updateMaterialTemplate:function(){var t=this,e=encodeURIComponent(this.templateCodeArea);this.$Http.post("/materialTemplate/updateMaterialTemplate.json?",{materialTemplateCode:e,materialTemplateId:this.materialTemplateId,materialTemplateName:this.templateName,materialTemplateDesc:this.templateDesc}).then(function(e){console.log(e),0==e.body.status?(t.modal=!1,t.$emit("filterParent")):t.modal=!0})},onFocusName:function(){this.soltNameLen="最多可输入100个字符",this.isAtive=!1},userDataNum:function(){if(this.templateName){null==this.templateName.match(/^[\s\S]{1,100}$/)&&(this.soltNameLen="长度超过一百个字符",this.isAtive=!0)}else this.soltNameLen="物料名称不能为空",this.isAtive=!0},blurVal:function(){var t=this.templateCodeArea.match(/<fx168start>/),e=this.templateCodeArea.match(/<fx168end>/);console.log(t+"===="+e),this.templateCodeArea?"<fx168start>"==t&&"<fx168end>"==e?(this.descString=this.descString2,this.isAtiveCf=!1):(this.descString="您输入的模板代码中不包含<fx168start>、<fx168end>，请重新输入",this.isAtiveCf=!0):(this.descString="模板代码不能为空",this.isAtiveCf=!0)}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Modal",{attrs:{title:"修改物料模板",styles:{width:"100%"},"class-name":"modal-box"},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("div",{staticClass:"master-content"},[a("div",{staticClass:"row"},[a("label",[t._v("物料模板名称：")]),t._v(" "),a("Input",{staticStyle:{width:"300px"},attrs:{type:"text",name:"templateName",placeholder:"请输入模板名称"},on:{"on-blur":t.userDataNum,"on-focus":t.onFocusName},model:{value:t.templateName,callback:function(e){t.templateName=e},expression:"templateName"}},[t._v(t._s(t.materialName))]),t._v(" "),a("span",{staticClass:"label-right",class:{"label-right-active":t.isAtive}},[t._v(t._s(t.soltNameLen))])],1),t._v(" "),a("div",{staticClass:"row"},[a("label",[t._v("代码：")]),t._v(" "),a("Input",{staticStyle:{width:"300px",height:"200px"},attrs:{type:"textarea",rows:8,placeholder:"请输入模板代码"},on:{"on-blur":t.blurVal},model:{value:t.templateCodeArea,callback:function(e){t.templateCodeArea=e},expression:"templateCodeArea"}}),t._v(" "),a("span",{staticClass:"label-right",class:{"label-right-active":t.isAtiveCf},staticStyle:{width:"300px",display:"inline-block"}},[t._v(t._s(t.descString))])],1),t._v(" "),a("div",{staticClass:"row"},[a("label",[t._v("说明：")]),t._v(" "),a("Input",{staticStyle:{width:"300px",height:"100px"},attrs:{type:"textarea",rows:8,placeholder:"(选填)"},model:{value:t.templateDesc,callback:function(e){t.templateDesc=e},expression:"templateDesc"}})],1)]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text"},on:{click:t.cancel}},[t._v("取消")]),t._v(" "),a("Button",{staticClass:"btnColor",attrs:{type:"primary"},on:{click:t.updateMaterialTemplate}},[t._v("修改")])],1)])],1)},staticRenderFns:[]};var s=a("vSla")(l,i,!1,function(t){a("yEIq")},"data-v-0881ad16",null);e.default=s.exports},uazo:function(t,e){},yEIq:function(t,e){},yP8O:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l={data:function(){return{templateName:"",templateCodeArea:"",templateDesc:"",soltNameLen:"最多可输入100个字符",descString2:'常用语法规则：(1)声明参数：var 参数名:数据类型=0或1; //参数含义说明数据类型包括media(图片或flash)、link(点击链接)、text(文本)、number(数值)0或1表示是否必填，0为选填，1为必填例如，var imglink:link=1;//图片点击链接(2)引用参数：${参数名};例如：<a href="${imglink}" target="_blank">...</a>',descString:'常用语法规则：(1)声明参数：var 参数名:数据类型=0或1; //参数含义说明数据类型包括media(图片或flash)、link(点击链接)、text(文本)、number(数值)0或1表示是否必填，0为选填，1为必填例如，var imglink:link=1;//图片点击链接(2)引用参数：${参数名};例如：<a href="${imglink}" target="_blank">...</a>',isAtive:!1,modal:!1,isAtiveCf:!1}},created:function(){},methods:{beforeLoad:function(){this.descString=this.descString2,this.isAtiveCf=!1,this.templateName="",this.templateCodeArea="",this.templateDesc="",this.soltNameLen="最多可输入100个字符",this.isAtive=!1,this.modal=!0},cancel:function(){this.descString=this.descString2,this.isAtiveCf=!1,this.templateName="",this.templateCodeArea="",this.templateDesc="",this.soltNameLen="最多可输入100个字符",this.isAtive=!1,this.modal=!1},createMaterialTemplate:function(){var t=this,e=encodeURIComponent(this.templateCodeArea);console.log(e);this.$Http.post("/materialTemplate/createMaterialTemplate.json?",{materialTemplateCode:e,materialTemplateName:this.templateName,materialTemplateDesc:this.templateDesc}).then(function(e){0==e.body.status&&(t.modal=!1,t.$emit("filterParent"),console.log(e))})},onFocusName:function(){this.soltNameLen="最多可输入100个字符",this.isAtive=!1},userDataNum:function(){if(this.templateName){null==this.templateName.match(/^[\s\S]{1,100}$/)&&(this.soltNameLen="长度超过一百个字符",this.isAtive=!0)}else this.soltNameLen="物料名称不能为空",this.isAtive=!0},blurVal:function(){var t=this.templateCodeArea.match(/<fx168start>/),e=this.templateCodeArea.match(/<fx168end>/);console.log(t+"===="+e),this.templateCodeArea?"<fx168start>"==t&&"<fx168end>"==e?(this.descString=this.descString2,this.isAtiveCf=!1):(this.descString="您输入的模板代码中不包含<fx168start>、<fx168end>，请重新输入",this.isAtiveCf=!0):(this.descString="模板代码不能为空",this.isAtiveCf=!0)}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Modal",{attrs:{title:"新建物料模板",styles:{width:"100%"},"class-name":"modal-box"},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("div",{staticClass:"master-content"},[a("div",{staticClass:"row"},[a("label",[t._v("物料模板名称：")]),t._v(" "),a("Input",{staticStyle:{width:"300px"},attrs:{type:"text",name:"templateName",placeholder:"请输入模板名称"},on:{"on-blur":t.userDataNum,"on-focus":t.onFocusName},model:{value:t.templateName,callback:function(e){t.templateName=e},expression:"templateName"}}),t._v(" "),a("span",{staticClass:"label-right",class:{"label-right-active":t.isAtive}},[t._v(t._s(t.soltNameLen))])],1),t._v(" "),a("div",{staticClass:"row"},[a("label",[t._v("代码：")]),t._v(" "),a("Input",{staticStyle:{width:"300px",height:"200px"},attrs:{type:"textarea",rows:8,placeholder:"请输入模板代码"},on:{"on-blur":t.blurVal},model:{value:t.templateCodeArea,callback:function(e){t.templateCodeArea=e},expression:"templateCodeArea"}}),t._v(" "),a("span",{staticClass:"label-right",class:{"label-right-active":t.isAtiveCf},staticStyle:{width:"300px",display:"inline-block"}},[t._v(t._s(t.descString))])],1),t._v(" "),a("div",{staticClass:"row"},[a("label",[t._v("说明：")]),t._v(" "),a("Input",{staticStyle:{width:"300px",height:"100px"},attrs:{type:"textarea",rows:8,placeholder:"(选填)"},model:{value:t.templateDesc,callback:function(e){t.templateDesc=e},expression:"templateDesc"}})],1)]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text"},on:{click:t.cancel}},[t._v("取消")]),t._v(" "),a("Button",{staticClass:"btnColor",attrs:{type:"primary"},on:{click:t.createMaterialTemplate}},[t._v("新建")])],1)])],1)},staticRenderFns:[]};var s=a("vSla")(l,i,!1,function(t){a("uazo")},"data-v-66587f04",null);e.default=s.exports}});
//# sourceMappingURL=5.b4b0e581921f5cd6f570.js.map